#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="e45e798b-b477-4bc1-a88a-62fc55d9a502" LowerBound="1.1" HigherBound="123.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="ServiceDeclaration" OID="592fad59-9462-4954-b670-6e709993e5e4" ParentLink="Module_ServiceDeclaration" LowerBound="4.1" HigherBound="122.1">
            <om:Property Name="InitializedTransactionType" Value="True" />
            <om:Property Name="IsInvokable" Value="True" />
            <om:Property Name="TypeModifier" Value="Public" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="// Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions.Change&#xD;&#xA;// Change orchestration in the end to end Business Process Management Scenario.&#xD;&#xA;// &#xD;&#xA;//&#xD;&#xA;// Copyright (c) Microsoft Corporation. All rights reserved.  &#xD;&#xA;// THIS CODE AND INFORMATION ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, &#xD;&#xA;// EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES &#xD;&#xA;// OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE." />
            <om:Property Name="Name" Value="ChangeOrch" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="LongRunningTransaction" OID="1a3e0dd6-bcef-4a21-b6b0-b5fc44d3150b" ParentLink="ServiceDeclaration_Transaction" LowerBound="5.19" HigherBound="5.54">
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="LRTransaction" />
                <om:Property Name="Signal" Value="False" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="21da6bf1-3dc7-432e-8f7a-1ae88adc8bc8" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="VariableDeclaration" OID="c91432b7-6cbe-45bc-93e2-b4f5fcbafd53" ParentLink="ServiceBody_Declaration" LowerBound="7.15" HigherBound="7.113">
                    <om:Property Name="UseDefaultConstructor" Value="False" />
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="orderHandler" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageDeclaration" OID="d2682bc0-7591-4d83-b549-4c5161ee7221" ParentLink="ServiceBody_Declaration" LowerBound="7.115" HigherBound="7.193">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.OrderSchema" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="OrderMsg" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="CorrelationDeclaration" OID="825ef797-1919-46ea-a682-d89446cccd29" ParentLink="ServiceBody_Declaration" LowerBound="7.195" HigherBound="7.299">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.OrderCorrelationType" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="OrderCorrelation" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="VariableDeclaration" OID="59d38ce9-8cc3-4e72-924b-f6f3cf297cd8" ParentLink="ServiceBody_Declaration" LowerBound="7.301" HigherBound="7.376">
                    <om:Property Name="UseDefaultConstructor" Value="True" />
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Routing" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="routingInfo" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="VariableDeclaration" OID="187bf375-ec4a-4c50-be7e-1267d2b83db1" ParentLink="ServiceBody_Declaration" LowerBound="7.378" HigherBound="7.403">
                    <om:Property Name="UseDefaultConstructor" Value="False" />
                    <om:Property Name="Type" Value="System.String" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="serviceType" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Scope" OID="6546e7cd-5748-4b9b-8bf4-77fcd741dfbd" ParentLink="ServiceBody_Statement" LowerBound="9.1" HigherBound="120.1">
                    <om:Property Name="InitializedTransactionType" Value="True" />
                    <om:Property Name="IsSynchronized" Value="False" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="AnalystComments" Value="The change scope will compensate the cancel request only if the activate fails." />
                    <om:Property Name="Name" Value="Change Scope" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="VariableDeclaration" OID="659b18c6-af56-4201-88a3-1bfa67fb0913" ParentLink="Scope_VariableDeclaration" LowerBound="12.1" HigherBound="13.1">
                        <om:Property Name="UseDefaultConstructor" Value="False" />
                        <om:Property Name="Type" Value="System.String" />
                        <om:Property Name="ParamDirection" Value="In" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="currentServiceType" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                    <om:Element Type="LongRunningTransaction" OID="31658694-5308-4823-95af-fa46ae0f949c" ParentLink="Scope_Transaction" LowerBound="10.18" HigherBound="10.60">
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ChangeTransaction" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="Scope" OID="a147fb84-6b4c-45ba-b377-80bd9fd120b8" ParentLink="ComplexStatement_Statement" LowerBound="16.1" HigherBound="64.1">
                        <om:Property Name="InitializedTransactionType" Value="True" />
                        <om:Property Name="IsSynchronized" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Calling Code Scope" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="VariableDeclaration" OID="f1707a6b-7927-4ca6-9e2c-2ad5d657659e" ParentLink="Scope_VariableDeclaration" LowerBound="20.1" HigherBound="21.1">
                            <om:Property Name="UseDefaultConstructor" Value="True" />
                            <om:Property Name="Type" Value="System.Object" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ReturnValue" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableDeclaration" OID="45c707c7-0ceb-462f-aa24-84d64e531d61" ParentLink="Scope_VariableDeclaration" LowerBound="21.1" HigherBound="22.1">
                            <om:Property Name="InitialValue" Value="&quot;CancelFailure&quot;" />
                            <om:Property Name="UseDefaultConstructor" Value="False" />
                            <om:Property Name="Type" Value="System.String" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Reason" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableDeclaration" OID="46b382d9-86d7-4016-81de-3251715698e6" ParentLink="Scope_VariableDeclaration" LowerBound="22.1" HigherBound="23.1">
                            <om:Property Name="UseDefaultConstructor" Value="False" />
                            <om:Property Name="Type" Value="System.Array" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ParameterArray" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableDeclaration" OID="850cbe1d-db82-45c8-804f-9549bfede7b4" ParentLink="Scope_VariableDeclaration" LowerBound="23.1" HigherBound="24.1">
                            <om:Property Name="UseDefaultConstructor" Value="False" />
                            <om:Property Name="Type" Value="System.String" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MethodName" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableDeclaration" OID="70be9e09-49c4-43ca-8dac-4c1454746b13" ParentLink="Scope_VariableDeclaration" LowerBound="24.1" HigherBound="25.1">
                            <om:Property Name="UseDefaultConstructor" Value="True" />
                            <om:Property Name="Type" Value="System.Exception" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Ex" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableDeclaration" OID="cf49db1d-4ae2-4506-88c8-58355d865c90" ParentLink="Scope_VariableDeclaration" LowerBound="25.1" HigherBound="26.1">
                            <om:Property Name="UseDefaultConstructor" Value="True" />
                            <om:Property Name="Type" Value="System.Object" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="CalledObject" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableDeclaration" OID="7dd17d17-5959-41fb-be11-69c37619b583" ParentLink="Scope_VariableDeclaration" LowerBound="26.1" HigherBound="27.1">
                            <om:Property Name="UseDefaultConstructor" Value="False" />
                            <om:Property Name="Type" Value="System.Type" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ObjectType" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableAssignment" OID="2584edca-8f23-44de-94ef-4f51086934f8" ParentLink="ComplexStatement_Statement" LowerBound="34.1" HigherBound="36.1">
                            <om:Property Name="Expression" Value="currentServiceType = orderHandler.GetServiceType(OrderMsg.CustNum);&#xD;&#xA;" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Current ServiceType" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="MessageDeclaration" OID="6e460fca-dd4d-4e62-9844-04ff23f087a8" ParentLink="Scope_MessageDeclaration" LowerBound="19.1" HigherBound="20.1">
                            <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="XmlOrderMsg" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Catch" OID="9f3e4274-7edc-496b-adc4-9f07071354ee" ParentLink="Scope_Catch" LowerBound="39.1" HigherBound="62.1">
                            <om:Property Name="ExceptionName" Value="CodeEx" />
                            <om:Property Name="ExceptionType" Value="System.Exception" />
                            <om:Property Name="IsFaultMessage" Value="False" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Catch Exception" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="VariableAssignment" OID="95666065-17a3-499f-b066-0b37ddd96097" ParentLink="Catch_Statement" LowerBound="42.1" HigherBound="51.1">
                                <om:Property Name="Expression" Value="Ex = CodeEx;&#xD;&#xA;CalledObject = orderHandler;&#xD;&#xA;ObjectType = orderHandler.GetType();&#xD;&#xA;Reason = &quot;GetServiceType Failed&quot;;&#xD;&#xA;MethodName = &quot;GetServiceType&quot;;&#xD;&#xA;ParameterArray = System.Array.CreateInstance(typeof(System.Object), 1);&#xD;&#xA;ParameterArray.SetValue(OrderMsg.CustNum, 0);&#xD;&#xA;ReturnValue = null;" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Initial Exception" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Construct" OID="f7c41fc6-6a7a-4a7b-aea4-8c0e261cc7c8" ParentLink="Catch_Statement" LowerBound="51.1" HigherBound="57.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Construct XmlOrderMsg" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="MessageAssignment" OID="89c1677c-820c-49e4-b513-7da94f6e60fb" ParentLink="ComplexStatement_Statement" LowerBound="54.1" HigherBound="56.1">
                                    <om:Property Name="Expression" Value="XmlOrderMsg = OrderMsg;" />
                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                    <om:Property Name="Name" Value="Convert OrderMsg" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                                <om:Element Type="MessageRef" OID="705a7c2b-6561-41df-91c3-7c9323e9bed9" ParentLink="Construct_MessageRef" LowerBound="52.43" HigherBound="52.54">
                                    <om:Property Name="Ref" Value="XmlOrderMsg" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Call" OID="62d1e900-40a4-4e74-bb5e-8067d958ceab" ParentLink="Catch_Statement" LowerBound="57.1" HigherBound="59.1">
                                <om:Property Name="Identifier" Value="CallExceptionHandler_DC" />
                                <om:Property Name="Invokee" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.ExceptionHandlerOrch" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Call Exception Handler" />
                                <om:Property Name="Signal" Value="False" />
                                <om:Element Type="Parameter" OID="f70c2f49-eac4-4ad8-b27c-328147cf93a7" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="Reason" />
                                    <om:Property Name="Type" Value="System.String" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="38e60f68-b215-42c6-b6c4-6a78b34ce8be" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="Ex" />
                                    <om:Property Name="Type" Value="System.Exception" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="9924d22b-8ffc-42db-b397-0debb4d778c8" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="CalledObject" />
                                    <om:Property Name="Type" Value="System.Object" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="bff92176-7bba-4fec-b98c-7ebedac9f2b1" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="MethodName" />
                                    <om:Property Name="Type" Value="System.String" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="8da43285-31e1-4500-ad5a-5f674533318a" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="ParameterArray" />
                                    <om:Property Name="Type" Value="System.Array" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="3e10a73a-785e-457e-b9f3-d7ee0cabd22b" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="OrderCorrelation" />
                                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.OrderCorrelationType" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="03a7557e-c4ed-4f8e-9f56-ae95ce9a055b" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="XmlOrderMsg" />
                                    <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="79c2aea6-e487-46e6-8775-41e30b9504ff" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="Out" />
                                    <om:Property Name="Name" Value="ReturnValue" />
                                    <om:Property Name="Type" Value="System.Object" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="35ca64f7-4695-4abd-a6c8-d11cf0175eef" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="ObjectType" />
                                    <om:Property Name="Type" Value="System.Type" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="Parameter" OID="201822b1-c05a-4cca-9e40-c7c20063851e" ParentLink="InvokeStatement_Parameter">
                                    <om:Property Name="Direction" Value="In" />
                                    <om:Property Name="Name" Value="routingInfo" />
                                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Routing" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="VariableAssignment" OID="6eaeae1f-b1c2-4704-b8cf-d48ea8f2d27a" ParentLink="Catch_Statement" LowerBound="59.1" HigherBound="61.1">
                                <om:Property Name="Expression" Value="currentServiceType = (System.String)ReturnValue;" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Get Result" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Scope" OID="26c0c24a-f3f3-4b5e-ab90-65143f93696c" ParentLink="ComplexStatement_Statement" LowerBound="64.1" HigherBound="82.1">
                        <om:Property Name="InitializedTransactionType" Value="True" />
                        <om:Property Name="IsSynchronized" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Call Cancel Scope" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="LongRunningTransaction" OID="67e7adad-03c6-4735-8b4a-7b5f6d4e6702" ParentLink="Scope_Transaction" LowerBound="65.26" HigherBound="65.72">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="CallCancelTransaction" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                        <om:Element Type="Call" OID="59e150ca-7556-4e87-b0c4-03a47b150d0f" ParentLink="ComplexStatement_Statement" LowerBound="69.1" HigherBound="71.1">
                            <om:Property Name="Identifier" Value="CallCancel" />
                            <om:Property Name="Invokee" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions.CancelOrch" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Call  Cancel" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Parameter" OID="fcd49df8-0cac-4b62-ba60-1b7c43a800d7" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="orderHandler" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="70a32024-27c1-457a-a194-0c9d566f6424" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="OrderMsg" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.OrderSchema" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="5c24311d-0019-42b3-94e0-0e0a852b0226" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="OrderCorrelation" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.OrderCorrelationType" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="fece74ad-a15e-4e73-91ca-59d27aa63bbd" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="routingInfo" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Routing" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="f3c808e7-6a80-4704-b216-00b5e8792b0c" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="currentServiceType" />
                                <om:Property Name="Type" Value="System.String" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Compensation" OID="d31d7cc5-1711-496d-b4e6-306f8e6c08b6" ParentLink="Scope_Compensation" LowerBound="72.1" HigherBound="81.1">
                            <om:Property Name="IsCustom" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Cancel Compensation" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Compensate" OID="31076d4c-e326-4e98-9287-67a1f394f27d" ParentLink="Compensation_Statement" LowerBound="75.1" HigherBound="80.1">
                                <om:Property Name="Invokee" Value="CallCancel" />
                                <om:Property Name="ReportToAnalyst" Value="False" />
                                <om:Property Name="Name" Value="Rollback Cancel" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Scope" OID="6ddf4f59-7141-4c49-b912-45b53f06c7a7" ParentLink="ComplexStatement_Statement" LowerBound="82.1" HigherBound="104.1">
                        <om:Property Name="InitializedTransactionType" Value="True" />
                        <om:Property Name="IsSynchronized" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Call Activate Scope" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="VariableDeclaration" OID="9b9d5eec-fef3-4a78-bcc5-866d328a36c3" ParentLink="Scope_VariableDeclaration" LowerBound="85.1" HigherBound="86.1">
                            <om:Property Name="UseDefaultConstructor" Value="True" />
                            <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException" />
                            <om:Property Name="ParamDirection" Value="In" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="innerActivateEx" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Call" OID="d2a3fe25-551c-4ef3-b052-8f7eaf61cb77" ParentLink="ComplexStatement_Statement" LowerBound="89.1" HigherBound="91.1">
                            <om:Property Name="Identifier" Value="CallActivate" />
                            <om:Property Name="Invokee" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions.ActivateOrch" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Call Activate" />
                            <om:Property Name="Signal" Value="False" />
                            <om:Element Type="Parameter" OID="97279a1e-51ae-457a-a102-dd2dd7149087" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="OrderMsg" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.OrderSchema" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="0da0a7e9-e3d9-43a4-8d1f-c17f26108967" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="OrderCorrelation" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.OrderCorrelationType" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="0bd8d73c-a116-4874-9ac4-da05148ea4cc" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="serviceType" />
                                <om:Property Name="Type" Value="System.String" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="8a906d71-6104-478f-b914-1cf30c8ffa3b" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="orderHandler" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Parameter" OID="7b2e3197-1e00-4f44-9f95-579e92f5e494" ParentLink="InvokeStatement_Parameter">
                                <om:Property Name="Direction" Value="In" />
                                <om:Property Name="Name" Value="routingInfo" />
                                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Routing" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Catch" OID="fa5e0926-e8d5-44ed-9b47-f95de4d1c779" ParentLink="Scope_Catch" LowerBound="94.1" HigherBound="102.1">
                            <om:Property Name="ExceptionName" Value="Ex" />
                            <om:Property Name="ExceptionType" Value="System.Exception" />
                            <om:Property Name="IsFaultMessage" Value="False" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Catch Exception" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="VariableAssignment" OID="e4672176-1430-4217-8a88-de1f4a0366ab" ParentLink="Catch_Statement" LowerBound="97.1" HigherBound="99.1">
                                <om:Property Name="Expression" Value="innerActivateEx = new Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException(&quot;Activate threw an exception&quot;, Ex);" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Init Exception" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="Throw" OID="ac4103b9-9c28-413c-afab-8fb80f7306b2" ParentLink="Catch_Statement" LowerBound="99.1" HigherBound="101.1">
                                <om:Property Name="ThrownReference" Value="innerActivateEx" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Throw ActivateEx" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Catch" OID="045faaaa-6478-4fe3-822b-c9870611abcc" ParentLink="Scope_Catch" LowerBound="107.1" HigherBound="118.1">
                        <om:Property Name="ExceptionName" Value="activateEx" />
                        <om:Property Name="ExceptionType" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException" />
                        <om:Property Name="IsFaultMessage" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Catch Activate Exception" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Compensate" OID="3789da57-e0f4-4819-b308-652ce9f791dd" ParentLink="Catch_Statement" LowerBound="110.1" HigherBound="115.1">
                            <om:Property Name="Invokee" Value="CallCancelTransaction" />
                            <om:Property Name="ReportToAnalyst" Value="False" />
                            <om:Property Name="Name" Value="Rollback Call Cancel" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Throw" OID="2672fb28-9fce-4841-af78-4538f49a2a43" ParentLink="Catch_Statement" LowerBound="115.1" HigherBound="117.1">
                            <om:Property Name="ThrownReference" Value="General Exception" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Throw Exception" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
    <om:Element Type="PrintElement" OID="56e53747-941d-4197-9514-2cdecef75799">
        <om:Property Name="Bottom" Value="0" />
        <om:Property Name="FooterBottom" Value="0" />
        <om:Property Name="FooterCenter" Value="0" />
        <om:Property Name="FooterMargin" Value="0" />
        <om:Property Name="FooterTop" Value="0" />
        <om:Property Name="HeaderBottom" Value="0" />
        <om:Property Name="HeaderCenter" Value="3" />
        <om:Property Name="HeaderMargin" Value="0" />
        <om:Property Name="HeaderTop" Value="0" />
        <om:Property Name="Left" Value="0" />
        <om:Property Name="PagesAcross" Value="0" />
        <om:Property Name="PagesDown" Value="0" />
        <om:Property Name="Right" Value="0" />
        <om:Property Name="Scaling" Value="100" />
        <om:Property Name="Top" Value="0" />
        <om:Property Name="Orientation" Value="Portrait" />
        <om:Property Name="Signal" Value="False" />
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions
{
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    public service longrunning transaction ChangeOrch
    {
        body (Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper orderHandler, message Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.OrderSchema OrderMsg, correlation Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.OrderCorrelationType OrderCorrelation, Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Routing routingInfo, System.String serviceType)
        {
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("6546e7cd-5748-4b9b-8bf4-77fcd741dfbd")]
            scope longrunning transaction ChangeTransaction
            {
                System.String currentServiceType;
                body
                {
                    currentServiceType = "";
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("a147fb84-6b4c-45ba-b377-80bd9fd120b8")]
                    scope
                    {
                        message System.Xml.XmlDocument XmlOrderMsg;
                        System.Object ReturnValue;
                        System.String Reason;
                        System.Array ParameterArray;
                        System.String MethodName;
                        System.Exception Ex;
                        System.Object CalledObject;
                        System.Type ObjectType;
                        body
                        {
                            ReturnValue = new System.Object();
                            Reason = "CancelFailure";
                            MethodName = "";
                            Ex = new System.Exception();
                            CalledObject = new System.Object();
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("2584edca-8f23-44de-94ef-4f51086934f8")]
                            currentServiceType = orderHandler.GetServiceType(OrderMsg.CustNum);
                        }
                        exceptions
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("9f3e4274-7edc-496b-adc4-9f07071354ee")]
                            catch (System.Exception CodeEx)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("95666065-17a3-499f-b066-0b37ddd96097")]
                                Ex = CodeEx;
                                CalledObject = orderHandler;
                                ObjectType = orderHandler.GetType();
                                Reason = "GetServiceType Failed";
                                MethodName = "GetServiceType";
                                ParameterArray = System.Array.CreateInstance(typeof(System.Object), 1);
                                ParameterArray.SetValue(OrderMsg.CustNum, 0);
                                ReturnValue = null;
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("f7c41fc6-6a7a-4a7b-aea4-8c0e261cc7c8")]
                                construct XmlOrderMsg
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("89c1677c-820c-49e4-b513-7da94f6e60fb")]
                                    XmlOrderMsg = OrderMsg;
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("62d1e900-40a4-4e74-bb5e-8067d958ceab")]
                                call Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.ExceptionHandlerOrch (Reason, Ex, CalledObject, MethodName, ParameterArray, OrderCorrelation, XmlOrderMsg, out ReturnValue, ObjectType, routingInfo);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("6eaeae1f-b1c2-4704-b8cf-d48ea8f2d27a")]
                                currentServiceType = (System.String)ReturnValue;
                            }
                        }
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("26c0c24a-f3f3-4b5e-ab90-65143f93696c")]
                    scope longrunning transaction CallCancelTransaction
                    {
                        body
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("59e150ca-7556-4e87-b0c4-03a47b150d0f")]
                            call Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions.CancelOrch (orderHandler, OrderMsg, OrderCorrelation, routingInfo, currentServiceType) CallCancel;
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("d31d7cc5-1711-496d-b4e6-306f8e6c08b6")]
                        compensation ()
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("31076d4c-e326-4e98-9287-67a1f394f27d")]
                            if (succeeded(CallCancel))
                            {
                                compensate CallCancel ();
                            }
                        }
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("6ddf4f59-7141-4c49-b912-45b53f06c7a7")]
                    scope
                    {
                        Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException innerActivateEx;
                        body
                        {
                            innerActivateEx = new Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException();
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("d2a3fe25-551c-4ef3-b052-8f7eaf61cb77")]
                            call Microsoft.Samples.BizTalk.SouthridgeVideo.CableOrderActions.ActivateOrch (OrderMsg, OrderCorrelation, serviceType, orderHandler, routingInfo);
                        }
                        exceptions
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("fa5e0926-e8d5-44ed-9b47-f95de4d1c779")]
                            catch (System.Exception Ex)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("e4672176-1430-4217-8a88-de1f4a0366ab")]
                                innerActivateEx = new Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException("Activate threw an exception", Ex);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("ac4103b9-9c28-413c-afab-8fb80f7306b2")]
                                throw innerActivateEx;
                            }
                        }
                    }
                }
                exceptions
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("045faaaa-6478-4fe3-822b-c9870611abcc")]
                    catch (Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.ActivateException activateEx)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("3789da57-e0f4-4819-b308-652ce9f791dd")]
                        if (succeeded(CallCancelTransaction))
                        {
                            compensate CallCancelTransaction ();
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("2672fb28-9fce-4841-af78-4538f49a2a43")]
                        throw;
                    }
                }
            }
        }
    }
}

