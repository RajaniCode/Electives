#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="e7a36ed6-a5dd-40dd-b7d1-a92150ae4fc4" LowerBound="1.1" HigherBound="33.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="ServiceDeclaration" OID="031628a6-9b1a-4c70-9314-e601d8c359a3" ParentLink="Module_ServiceDeclaration" LowerBound="4.1" HigherBound="32.1">
            <om:Property Name="InitializedTransactionType" Value="False" />
            <om:Property Name="IsInvokable" Value="True" />
            <om:Property Name="TypeModifier" Value="Public" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="// Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.CheckInterrupt&#xD;&#xA;// CheckInterrupt orchestration in the end to end Business Process Management Scenario.&#xD;&#xA;//&#xD;&#xA;// Copyright (c) Microsoft Corporation. All rights reserved.  &#xD;&#xA;// THIS CODE AND INFORMATION ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, &#xD;&#xA;// EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES &#xD;&#xA;// OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE." />
            <om:Property Name="Name" Value="CheckInterruptOrch" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="VariableDeclaration" OID="0472b956-9a8f-44b3-a3a6-82226d4e3e23" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="10.1" HigherBound="11.1">
                <om:Property Name="UseDefaultConstructor" Value="True" />
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.InterruptException" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="interruptEx" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="1d35063b-be58-4b7a-9555-875f7b98474b" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="9.1" HigherBound="10.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Interrupt" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="InterruptMsg" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="3ad0da72-7dc8-4b64-9e0a-3fd6c4d3c2cf" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="CorrelationDeclaration" OID="2952e1e3-2f5f-41c0-adfb-e141df3bfbd9" ParentLink="ServiceBody_Declaration" LowerBound="11.15" HigherBound="11.64">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.OrderCorrelationType" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="OrderCorrelation" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="StatementRef" OID="b337b209-50dd-4546-b2c4-4ffdd2f92eb4" ParentLink="CorrelationDeclaration_StatementRef" LowerBound="18.71" HigherBound="18.87">
                        <om:Property Name="Initializes" Value="False" />
                        <om:Property Name="Ref" Value="59869476-4653-404a-a59f-d1c9cfb4ccbb" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="StatementRef_1" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                </om:Element>
                <om:Element Type="Listen" OID="88309211-bd37-4619-953f-d17bc5490a39" ParentLink="ServiceBody_Statement" LowerBound="14.1" HigherBound="30.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Check for Interrupt" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="ListenBranch" OID="651ba771-e615-47ef-a344-7bf4d7b10e3e" ParentLink="ReallyComplexStatement_Branch" LowerBound="14.1" HigherBound="14.1">
                        <om:Property Name="IsGhostBranch" Value="True" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ListenBranch_1" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Send" OID="5fe473cf-ad28-47e7-b377-770e80501d45" ParentLink="ComplexStatement_Statement" LowerBound="20.1" HigherBound="22.1">
                            <om:Property Name="PortName" Value="InterruptPort" />
                            <om:Property Name="MessageName" Value="InterruptMsg" />
                            <om:Property Name="OperationName" Value="Interrupt" />
                            <om:Property Name="OperationMessageName" Value="Response" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Interrupted" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Throw" OID="54ce378f-5847-4719-85a6-631460fb757a" ParentLink="ComplexStatement_Statement" LowerBound="22.1" HigherBound="24.1">
                            <om:Property Name="ThrownReference" Value="interruptEx" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Throw InterruptEx" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Receive" OID="59869476-4653-404a-a59f-d1c9cfb4ccbb" ParentLink="ListenBranch_Statement" LowerBound="17.1" HigherBound="18.88">
                            <om:Property Name="Activate" Value="False" />
                            <om:Property Name="PortName" Value="InterruptPort" />
                            <om:Property Name="MessageName" Value="InterruptMsg" />
                            <om:Property Name="OperationName" Value="Interrupt" />
                            <om:Property Name="OperationMessageName" Value="Request" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Interrupted" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="ListenBranch" OID="71d5a1af-980e-4ec9-a615-8304ed37a7a5" ParentLink="ReallyComplexStatement_Branch" LowerBound="14.1" HigherBound="14.1">
                        <om:Property Name="IsGhostBranch" Value="True" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ListenBranch_2" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Delay" OID="343c6593-b8e2-4ca8-8414-0d8774293f48" ParentLink="ListenBranch_Statement" LowerBound="25.1" HigherBound="26.47">
                            <om:Property Name="Timeout" Value="new System.TimeSpan(0)" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Wait 0" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="0b5ebfdd-d03c-42a5-9c02-1f982fcd284e" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="7.1" HigherBound="9.1">
                <om:Property Name="PortModifier" Value="Implements" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="10" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.InterruptPortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="InterruptPort" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="DirectBindingAttribute" OID="080fa296-b83f-47a7-bc73-456acc0f6306" ParentLink="PortDeclaration_CLRAttribute" LowerBound="7.1" HigherBound="8.1">
                    <om:Property Name="PartnerPort" Value="InterruptPort" />
                    <om:Property Name="PartnerService" Value="Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.InterrupterOrch" />
                    <om:Property Name="DirectBindingType" Value="PartnerPort" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
    <om:Element Type="PrintElement" OID="19d6ffc1-6162-45b8-a1fa-7609d4618ef1">
        <om:Property Name="Bottom" Value="0" />
        <om:Property Name="FooterBottom" Value="0" />
        <om:Property Name="FooterCenter" Value="0" />
        <om:Property Name="FooterMargin" Value="0" />
        <om:Property Name="FooterTop" Value="0" />
        <om:Property Name="HeaderBottom" Value="0" />
        <om:Property Name="HeaderCenter" Value="3" />
        <om:Property Name="HeaderMargin" Value="0" />
        <om:Property Name="HeaderTop" Value="0" />
        <om:Property Name="Left" Value="0" />
        <om:Property Name="PagesAcross" Value="0" />
        <om:Property Name="PagesDown" Value="0" />
        <om:Property Name="Right" Value="0" />
        <om:Property Name="Scaling" Value="100" />
        <om:Property Name="Top" Value="0" />
        <om:Property Name="Orientation" Value="Portrait" />
        <om:Property Name="Signal" Value="False" />
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager
{
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    public service CheckInterruptOrch
    {
        [Microsoft.XLANGs.BaseTypes.DirectBinding(typeof(Microsoft.Samples.BizTalk.SouthridgeVideo.OrderManager.InterrupterOrch), "InterruptPort")]
        port implements InterruptPortType InterruptPort;
        message Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Interrupt InterruptMsg;
        Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.InterruptException interruptEx;
        body (correlation OrderCorrelationType OrderCorrelation)
        {
            interruptEx = new Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.InterruptException();
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("88309211-bd37-4619-953f-d17bc5490a39")]
            listen
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("59869476-4653-404a-a59f-d1c9cfb4ccbb")]
                until receive (InterruptPort.Interrupt, InterruptMsg, OrderCorrelation)
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("5fe473cf-ad28-47e7-b377-770e80501d45")]
                    send (InterruptPort.Interrupt, InterruptMsg);
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("54ce378f-5847-4719-85a6-631460fb757a")]
                    throw interruptEx;
                }
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("343c6593-b8e2-4ca8-8414-0d8774293f48")]
                timeout new System.TimeSpan(0)
                {
                }
            }
        }
    }
}

