#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="f743a864-8c19-4c3b-8590-a07330dd9f8e" LowerBound="1.1" HigherBound="520.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Orchestrations.Inline" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="PortType" OID="e759999f-b408-4545-ae60-6c84d17ee436" ParentLink="Module_PortType" LowerBound="4.1" HigherBound="11.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Public" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="CustomerServicePortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="d48e4da3-482a-4c9f-9980-0036d7075d7a" ParentLink="PortType_OperationDeclaration" LowerBound="6.1" HigherBound="10.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="GetAccountInfo" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="702021b0-55b0-4c58-80f5-d9c7553313fe" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="8.13" HigherBound="8.83">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceRequest" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="MessageRef" OID="a62de741-9400-4ace-8f02-b4542d6e260a" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="8.85" HigherBound="8.156">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="297e2116-e15b-4313-995d-1ad14936f1ad" ParentLink="Module_PortType" LowerBound="11.1" HigherBound="18.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PaymentTrackingSystemRequestPortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="837871d0-c49f-414c-9eec-a5be9e596ec9" ParentLink="PortType_OperationDeclaration" LowerBound="13.1" HigherBound="17.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="SendPmtTrackRequest" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="9f38c1b0-96d4-4bbd-a626-0a36fa97d37e" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="15.13" HigherBound="15.79">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentRequest" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="bb12dd25-6b69-424a-9cb4-10186db7384b" ParentLink="Module_PortType" LowerBound="18.1" HigherBound="25.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PaymentTrackingSystemResponsePortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="4fb1e78c-8740-4a3b-a98d-effdd9aacafb" ParentLink="PortType_OperationDeclaration" LowerBound="20.1" HigherBound="24.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ReceivePmtTrackRespone" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="f9e1fd95-a3f8-46f9-b4e1-d643e37140e4" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="22.13" HigherBound="22.80">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="35d754cb-8565-42b4-b8fd-4cb08ac55409" ParentLink="Module_PortType" LowerBound="25.1" HigherBound="32.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="SAPPortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="9ab27476-befc-497a-8f09-76764405de4b" ParentLink="PortType_OperationDeclaration" LowerBound="27.1" HigherBound="31.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="SAPRequestResponse" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="40fb8eeb-861a-48ee-a155-fe74cec857bf" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="29.13" HigherBound="29.118">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="911ae426-73fd-4a43-a47e-910f6792d0fe" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="29.120" HigherBound="29.226">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Response" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="56b484cb-e884-4928-aa1a-7a31c8933495" ParentLink="Module_PortType" LowerBound="32.1" HigherBound="39.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_1" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="4615ebd2-5df5-4653-836e-2f0697c763d5" ParentLink="PortType_OperationDeclaration" LowerBound="34.1" HigherBound="38.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="5842410d-ba3d-4547-bce6-961c0bcf3eef" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="36.13" HigherBound="36.35">
                    <om:Property Name="Ref" Value="System.Xml.XmlDocument" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="ServiceDeclaration" OID="d168a515-6d9f-4c80-a013-ace57a1671b7" ParentLink="Module_ServiceDeclaration" LowerBound="39.1" HigherBound="519.1">
            <om:Property Name="InitializedTransactionType" Value="True" />
            <om:Property Name="IsInvokable" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="// Microsoft.Samples.BizTalk.WoodgroveBank.Orchestrations.Inline.CustomerService&#xD;&#xA;// Customer Service orchestration in the end to end Service Oriented Scenario.&#xD;&#xA;// &#xD;&#xA;//&#xD;&#xA;// Copyright (c) Microsoft Corporation. All rights reserved.&#xD;&#xA;// THIS CODE AND INFORMATION ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, &#xD;&#xA;// EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES &#xD;&#xA;// OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE." />
            <om:Property Name="Name" Value="CustomerService" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="VariableDeclaration" OID="a7edb1d8-cb37-4dc1-a4e7-0b325a534399" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="50.1" HigherBound="51.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="customerName" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="f8354bc2-d3c7-40ac-90d1-25a9222df71f" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="51.1" HigherBound="52.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="zipCode" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="fd143cd4-4c9f-4de2-899e-b448f94c588e" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="52.1" HigherBound="53.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="RequestIsValid" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="24b70af5-40ba-42e9-93b3-93188b640d1f" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="53.1" HigherBound="54.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="errorLastPayments" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="555e8943-6ea7-4965-afbc-f0a882d9003c" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="54.1" HigherBound="55.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="errorPendingTransactions" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="85cec902-6a8e-4467-8a04-8d7f43e5bd73" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="55.1" HigherBound="56.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="errorCreditLimit" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="c1e34c52-69ae-4055-84f7-05272719e448" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="56.1" HigherBound="57.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="beginCreditLimitTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="7e134336-874f-4b89-a819-6530498c9c97" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="57.1" HigherBound="58.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="endCreditLimitTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="69e4eacf-7d18-46e1-8b2a-03f76317a2e8" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="58.1" HigherBound="59.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="beginLastPaymentTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="6f7501d2-fb04-4b34-97bc-577234390506" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="59.1" HigherBound="60.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="endLastPaymentTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="3c54a4ec-2f5e-4e18-9448-32b3b6566f9b" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="60.1" HigherBound="61.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="beginPendingTransTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="d513484a-a575-40ac-864b-14bd8aab588f" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="61.1" HigherBound="62.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="endPendingTransTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="1da2f013-67d5-4290-bcdc-bde986c7b592" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="62.1" HigherBound="63.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.TimeSpan" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="creditLimitDuration" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="1270ba83-8cdb-4078-846a-a44d460f5edd" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="63.1" HigherBound="64.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.TimeSpan" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="lastPaymentDuration" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="7ede12a0-02a9-4383-b429-5d0b992d87d5" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="64.1" HigherBound="65.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.TimeSpan" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="pendingTransDuration" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="9e5f9566-fd11-4546-a1f6-85e421358c2b" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="65.1" HigherBound="66.1">
                <om:Property Name="InitialValue" Value="null" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="activityID" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="b8010821-d8fb-4f4d-a116-3cd05578b434" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="66.1" HigherBound="67.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="beginTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="c39aa76f-f4a2-4d7f-8d90-9cb3c5bba3c6" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="67.1" HigherBound="68.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.DateTime" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="endTime" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="d06752af-a4ef-4372-bf12-39fbd89871c7" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="68.1" HigherBound="69.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.TimeSpan" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="timeTaken" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="335488ef-518b-45a4-b960-a1a7441c6a17" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="69.1" HigherBound="70.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="sapReturnCode" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="d41ad128-94c5-4de0-b882-b5b3fe1070e4" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="70.1" HigherBound="71.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="accountNumber" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="cc8c5dc3-fd94-4c49-9a92-2b4cfbf9f7dc" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="42.1" HigherBound="43.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentRequest" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="LastPaymentRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="9f493cad-606a-4ac8-bef0-d6295cdceea0" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="43.1" HigherBound="44.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentResponse" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="LastPaymentResponse" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="fbb4f775-afcb-45de-baa2-504206e5f7bb" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="44.1" HigherBound="45.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.PendingTransactionsRequest" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="PendingTransactionsWSRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="51852511-b09d-4d3a-b88c-dc5092dc2510" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="45.1" HigherBound="46.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.PendingTransactionsResponse" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="PendingTransactionsWSResponse" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="461d35b8-66f7-47d9-a09c-73dd5a6ac457" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="46.1" HigherBound="47.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Request" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="CreditLimitRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="a62f606e-7507-46ca-920e-ca6e150a2b7f" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="47.1" HigherBound="48.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Response" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="CreditLimitResponse" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="5b0e29fa-e19f-4208-bac9-b71c13a06181" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="48.1" HigherBound="49.1">
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="LastPaymentRequestAfterSendPipeline" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="d60c1112-418e-49f3-b08e-51df00bda468" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="49.1" HigherBound="50.1">
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="LastPaymentResponseBeforeReceivePipeline" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="a3cc254f-22a2-48a0-95d9-788ea1320c82" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageDeclaration" OID="ee659c09-9ccb-45a4-90bc-03fb0bf3dfac" ParentLink="ServiceBody_Declaration" LowerBound="71.15" HigherBound="71.116">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceRequest" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="CustomerServiceRequest" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageDeclaration" OID="5cc7c42c-8ff0-4fcf-92f0-c66c1475692d" ParentLink="ServiceBody_Declaration" LowerBound="71.118" HigherBound="71.225">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceResponse" />
                    <om:Property Name="ParamDirection" Value="Out" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="CustomerServiceResponse" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Scope" OID="fd1b8c03-9639-45f2-a5d8-4ec620f6f729" ParentLink="ServiceBody_Statement" LowerBound="82.1" HigherBound="517.1">
                    <om:Property Name="InitializedTransactionType" Value="True" />
                    <om:Property Name="IsSynchronized" Value="False" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="HandleExceptions" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="VariableAssignment" OID="1be60852-ac5a-451f-8512-48e7b37bf9a8" ParentLink="ComplexStatement_Statement" LowerBound="87.1" HigherBound="98.1">
                        <om:Property Name="Expression" Value="// Begin the BAM activity&#xD;&#xA;&#xD;&#xA;activityID = Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.BeginRequest(CustomerServiceRequest.RequestSource, CustomerServiceRequest.RequestType);&#xD;&#xA;&#xD;&#xA;// Save starting time for later computing response times...&#xD;&#xA;beginTime = System.DateTime.Now;&#xD;&#xA;&#xD;&#xA;// Request Received Milestone&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestReceived(activityID);&#xD;&#xA;        " />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="BeginActivity" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="VariableAssignment" OID="618154cb-f61d-4a73-8ab5-064e94804239" ParentLink="ComplexStatement_Statement" LowerBound="98.1" HigherBound="107.1">
                        <om:Property Name="Expression" Value="// Validate the input request based on the contents of the AuthenticationInfo element.&#xD;&#xA;// The AuthenticationInfo elements contains name/value pairs for authenticating the customer&#xD;&#xA;// We must either have a ZipCode or a CustomerName to declare that this a valid request.&#xD;&#xA;// Validating the message based on the contents of the request is done in one or more&#xD;&#xA;// of the back end systems...&#xD;&#xA;&#xD;&#xA;customerName  = xpath(CustomerServiceRequest, &#xD;&#xA;&quot;string(/*[local-name()='CustomerServiceRequest']/*[local-name()='Body']/*[local-name()='AuthenticationInfo'][DataElementName='CustomerName']/*[local-name()='DataElementValue'])&quot;);&#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ExtractCustomerName" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="VariableAssignment" OID="60cf248e-f3e1-4140-8206-cf7a44606e1f" ParentLink="ComplexStatement_Statement" LowerBound="107.1" HigherBound="112.1">
                        <om:Property Name="Expression" Value="//Get the zipCode out of the message...&#xD;&#xA;&#xD;&#xA;zipCode = xpath(CustomerServiceRequest, &#xD;&#xA;&quot;string(/*[local-name()='CustomerServiceRequest']/*[local-name()='Body']/*[local-name()='AuthenticationInfo'][DataElementName='ZipCode']/*[local-name()='DataElementValue'])&quot;);&#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ExtractZipCode" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="VariableAssignment" OID="b338d67b-b635-4a7f-a744-15eb4b4afbf7" ParentLink="ComplexStatement_Statement" LowerBound="112.1" HigherBound="116.1">
                        <om:Property Name="Expression" Value="//Get the Account Number out of the message...&#xD;&#xA;&#xD;&#xA;accountNumber = CustomerServiceRequest.Body.AccountNumber;" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ExtractAccountNumber" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="VariableAssignment" OID="38ded481-39cf-494e-b7eb-4c7bcb85d0f2" ParentLink="ComplexStatement_Statement" LowerBound="116.1" HigherBound="123.1">
                        <om:Property Name="Expression" Value="// One of the authentication values must be there in the message in order to proceed&#xD;&#xA;// And the account number must be there also.&#xD;&#xA;// And the account number must be valid...&#xD;&#xA;RequestIsValid = (zipCode != &quot;&quot; || customerName != &quot;&quot;) &amp;&amp; &#xD;&#xA;                    accountNumber != &quot;&quot; &amp;&amp;&#xD;&#xA;                    Microsoft.Samples.BizTalk.WoodgroveBank.Utilities.CustomerServiceHelper.IsAccountNumberValid(accountNumber) ;&#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ValidateRequest" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                    <om:Element Type="Decision" OID="a906930a-c276-4e60-8dee-82e85786f2bb" ParentLink="ComplexStatement_Statement" LowerBound="123.1" HigherBound="476.1">
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="IsRequestValid" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="DecisionBranch" OID="6e14364b-4934-43a6-9ee8-04eac3591a4b" ParentLink="ReallyComplexStatement_Branch" LowerBound="124.21" HigherBound="457.1">
                            <om:Property Name="Expression" Value="RequestIsValid " />
                            <om:Property Name="IsGhostBranch" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="IsValid" />
                            <om:Property Name="Signal" Value="False" />
                            <om:Element Type="Parallel" OID="fa8184fc-286c-4670-916a-11e9f805a7f5" ParentLink="ComplexStatement_Statement" LowerBound="126.1" HigherBound="425.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="CollectAccountInformations" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="ParallelBranch" OID="2841199c-4553-4cd9-a17d-8f9ea0765454" ParentLink="ReallyComplexStatement_Branch" LowerBound="131.1" HigherBound="206.1">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="ParallelBranch_1" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="Construct" OID="e5169b60-24d6-4885-af33-74d9102ed252" ParentLink="ComplexStatement_Statement" LowerBound="131.1" HigherBound="137.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ConstructCreditLimitRequest" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Transform" OID="cb744ab2-e9b3-4b23-9c31-587adb18ce5c" ParentLink="ComplexStatement_Statement" LowerBound="134.1" HigherBound="136.1">
                                            <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CreditLimiRequest" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="CreateCreditLimitRequest" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessagePartRef" OID="70b806d7-e676-4e16-8349-acb61e00b45a" ParentLink="Transform_InputMessagePartRef" LowerBound="135.160" HigherBound="135.182">
                                                <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_3" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="1d4eec99-5705-42d2-9b80-ccfee15d5209" ParentLink="Transform_OutputMessagePartRef" LowerBound="135.48" HigherBound="135.66">
                                                <om:Property Name="MessageRef" Value="CreditLimitRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_4" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="MessageRef" OID="54cb0bd0-2a6d-47a9-b298-4cbf04d41164" ParentLink="Construct_MessageRef" LowerBound="132.43" HigherBound="132.61">
                                            <om:Property Name="Ref" Value="CreditLimitRequest" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="2afe7bce-0978-49fe-b1be-cd744645d460" ParentLink="ComplexStatement_Statement" LowerBound="137.1" HigherBound="139.1">
                                        <om:Property Name="Expression" Value="beginCreditLimitTime = System.DateTime.Now;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="AssignBeginTime" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="Scope" OID="ba9f57c2-44d7-4eff-88dd-7fca8f0b19a7" ParentLink="ComplexStatement_Statement" LowerBound="139.1" HigherBound="183.1">
                                        <om:Property Name="InitializedTransactionType" Value="True" />
                                        <om:Property Name="IsSynchronized" Value="False" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="SAPTimeoutDetectionScope" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Construct" OID="e8d80a59-a7c1-4ae5-9e57-6ad1e7b4ffa5" ParentLink="ComplexStatement_Statement" LowerBound="144.1" HigherBound="150.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="GetCreditLimitResponseInline" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageAssignment" OID="4c3e6696-8705-40f2-b463-95c9376c750c" ParentLink="ComplexStatement_Statement" LowerBound="147.1" HigherBound="149.1">
                                                <om:Property Name="Expression" Value="CreditLimitResponse = Microsoft.Samples.BizTalk.WoodgroveBank.StubSapCall.StubSapCallHelper.GetAccountDetails(CreditLimitRequest);" />
                                                <om:Property Name="ReportToAnalyst" Value="False" />
                                                <om:Property Name="Name" Value="GetCreditLimitResponse" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="MessageRef" OID="e580dcc7-1321-4cf5-a0ba-184815f3a497" ParentLink="Construct_MessageRef" LowerBound="145.51" HigherBound="145.70">
                                                <om:Property Name="Ref" Value="CreditLimitResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="VariableAssignment" OID="cbe12065-a1d1-45ee-8bdd-8ac586ab85bd" ParentLink="ComplexStatement_Statement" LowerBound="150.1" HigherBound="157.1">
                                            <om:Property Name="Expression" Value="// Examine the SAP return code&#xD;&#xA;&#xD;&#xA;sapReturnCode = (System.String) xpath(CreditLimitResponse, &#xD;&#xA;&quot;string(/*[local-name()='BAPI_BANKACCT_GET_DETAIL_Response']/*[local-name()='E_RC'])&quot;);&#xD;&#xA;&#xD;&#xA;errorCreditLimit = sapReturnCode != &quot;&quot;;" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ExamineForError" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                        <om:Element Type="Catch" OID="4a269b78-ebe2-44e2-802c-255f0f38ef94" ParentLink="Scope_Catch" LowerBound="160.1" HigherBound="181.1">
                                            <om:Property Name="ExceptionName" Value="sapTimeoutException" />
                                            <om:Property Name="ExceptionType" Value="Microsoft.XLANGs.BaseTypes.TimeoutException" />
                                            <om:Property Name="IsFaultMessage" Value="False" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="SAPTimeoutHandler" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="VariableAssignment" OID="806b0e50-c920-4416-aada-c4b32c6028e2" ParentLink="Catch_Statement" LowerBound="163.1" HigherBound="167.1">
                                                <om:Property Name="Expression" Value="errorCreditLimit = true;&#xD;&#xA;&#xD;&#xA;sapReturnCode = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.SapTimeoutErrorCode() ;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="AssignTimeoutError" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="VariableAssignment" OID="e98d186c-5480-4047-9e14-9cd9c559af67" ParentLink="Catch_Statement" LowerBound="167.1" HigherBound="169.1">
                                                <om:Property Name="Expression" Value="System.Diagnostics.Trace.WriteLine(&quot;Timeout from SAP&quot;);&#xD;&#xA;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Trace" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="Construct" OID="ce80b779-0457-4dc7-839a-2927743656e0" ParentLink="Catch_Statement" LowerBound="169.1" HigherBound="175.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ConstructCreditLimitResponeMessage" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="Transform" OID="26da375a-e313-43e7-86ca-bbbaed50b7a3" ParentLink="ComplexStatement_Statement" LowerBound="172.1" HigherBound="174.1">
                                                    <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CreditLimitResponse" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="CreateCreditLimitResponseMessage" />
                                                    <om:Property Name="Signal" Value="False" />
                                                    <om:Element Type="MessagePartRef" OID="f2ad3390-914a-460a-bbd8-afd54940b178" ParentLink="Transform_InputMessagePartRef" LowerBound="173.175" HigherBound="173.197">
                                                        <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_23" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessagePartRef" OID="6fa72b09-8606-44cd-8f96-59a021852f21" ParentLink="Transform_OutputMessagePartRef" LowerBound="173.60" HigherBound="173.79">
                                                        <om:Property Name="MessageRef" Value="CreditLimitResponse" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_24" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="MessageRef" OID="6fda6ad1-5d03-4439-900f-d7ab4ac71c2c" ParentLink="Construct_MessageRef" LowerBound="170.55" HigherBound="170.74">
                                                    <om:Property Name="Ref" Value="CreditLimitResponse" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="VariableAssignment" OID="56ec757c-a262-4927-883f-100f0ed0d429" ParentLink="Catch_Statement" LowerBound="175.1" HigherBound="180.1">
                                                <om:Property Name="Expression" Value="System.Diagnostics.Trace.WriteLine(&quot;Constructed SAP Response Message&quot;);&#xD;&#xA;&#xD;&#xA;//xd1 = CreditLimitResponse ;&#xD;&#xA;//System.Diagnostics.Trace.Write(&quot;CreditLimitResponse = &quot; + xd1.OuterXml);&#xD;&#xA;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Trace" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="bcb6269f-e823-436f-8cfd-71a71579f727" ParentLink="ComplexStatement_Statement" LowerBound="183.1" HigherBound="206.1">
                                        <om:Property Name="Expression" Value="endCreditLimitTime = System.DateTime.Now;&#xD;&#xA;creditLimitDuration = endCreditLimitTime.Subtract(beginCreditLimitTime);&#xD;&#xA;&#xD;&#xA;// Create the appropriate BAM milestones...&#xD;&#xA;if (errorCreditLimit)&#xD;&#xA;{&#xD;&#xA;    // Map SAP return code to appropriate descriptions here...&#xD;&#xA;&#xD;&#xA;    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackCreditLimitError&#xD;&#xA;       (&#xD;&#xA;           activityID, &#xD;&#xA;           System.Convert.ToInt32(creditLimitDuration.TotalMilliseconds),&#xD;&#xA;           sapReturnCode,&#xD;&#xA;           Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.DecodeSapErrorCodeToDescription(sapReturnCode),&#xD;&#xA;           Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.DecodeSapErrorCodeToSource(sapReturnCode)&#xD;&#xA;       );       &#xD;&#xA;}&#xD;&#xA;else&#xD;&#xA;{&#xD;&#xA;    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackCreditLimitSuccess(activityID, &#xD;&#xA;          System.Convert.ToInt32(creditLimitDuration.TotalMilliseconds));&#xD;&#xA;}&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="CreateBAMMilestone" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="ParallelBranch" OID="db69bce4-1eab-4000-a2bd-8d4ce59f203c" ParentLink="ReallyComplexStatement_Branch" LowerBound="209.1" HigherBound="357.1">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="ParallelBranch_2" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="Construct" OID="85e96c88-a9d9-453e-ae0a-5262afe657ee" ParentLink="ComplexStatement_Statement" LowerBound="209.1" HigherBound="222.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ConstructLastPaymentRequest" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Transform" OID="21089c4b-bf08-469e-bf30-9fc772892925" ParentLink="ComplexStatement_Statement" LowerBound="212.1" HigherBound="214.1">
                                            <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_LastPaymentRequest" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="CreateLastPaymentRequest" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessagePartRef" OID="dc80f189-e333-4380-974d-5efb04c6ec86" ParentLink="Transform_InputMessagePartRef" LowerBound="213.161" HigherBound="213.183">
                                                <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_5" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="06688a0e-8d20-45d5-b9eb-b9c95255888e" ParentLink="Transform_OutputMessagePartRef" LowerBound="213.48" HigherBound="213.66">
                                                <om:Property Name="MessageRef" Value="LastPaymentRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_6" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="MessageAssignment" OID="116fbcee-e496-4a6e-b05b-0aae90c154c8" ParentLink="ComplexStatement_Statement" LowerBound="214.1" HigherBound="221.1">
                                            <om:Property Name="Expression" Value="&#xD;&#xA;// Set the document spec so the send pipeline can resolve the schemas without any ambiguity&#xD;&#xA;&#xD;&#xA;LastPaymentRequest(XMLNORM.DocumentSpecName)= Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.GetConfigParameter(Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.SsoConfigParameter.PaymentTrackingSendPipelineSchemaType);&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
                                            <om:Property Name="ReportToAnalyst" Value="False" />
                                            <om:Property Name="Name" Value="SetCredentials" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="MessageRef" OID="78e1b03f-6f22-47e0-a9d1-a21ad74ead24" ParentLink="Construct_MessageRef" LowerBound="210.43" HigherBound="210.61">
                                            <om:Property Name="Ref" Value="LastPaymentRequest" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="39967bb6-4dd3-4453-b118-99546b29931c" ParentLink="ComplexStatement_Statement" LowerBound="222.1" HigherBound="224.1">
                                        <om:Property Name="Expression" Value="beginLastPaymentTime = System.DateTime.Now;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="AssignBeginTime" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="Scope" OID="7554a188-e12f-4dd7-ba4c-6cb4d01a4321" ParentLink="ComplexStatement_Statement" LowerBound="224.1" HigherBound="276.1">
                                        <om:Property Name="InitializedTransactionType" Value="True" />
                                        <om:Property Name="IsSynchronized" Value="False" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ExecuteSendPipelnieCatchExceptionScope" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Construct" OID="3a0267bb-327f-402e-b552-05cd0d17e775" ParentLink="ComplexStatement_Statement" LowerBound="231.1" HigherBound="263.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ConstructRequestMessageAfterSendPipeline" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageAssignment" OID="b4d201dd-299a-4b88-bd2e-586251c087fb" ParentLink="ComplexStatement_Statement" LowerBound="234.1" HigherBound="262.1">
                                                <om:Property Name="Expression" Value="// Create the collection of messages to be sent to the send pipeline...&#xD;&#xA;sendPipelineInputMessages = new Microsoft.XLANGs.Pipeline.SendPipelineInputMessages();&#xD;&#xA;sendPipelineInputMessages.Add(LastPaymentRequest);&#xD;&#xA;&#xD;&#xA;// Create an empty message for the output from the pipeline...&#xD;&#xA;LastPaymentRequestAfterSendPipeline = null;&#xD;&#xA;&#xD;&#xA;// Execute the send pipeline and get the message output from the send pipeline.&#xD;&#xA;Microsoft.XLANGs.Pipeline.XLANGPipelineManager.ExecuteSendPipeline(&#xD;&#xA;        typeof(Microsoft.Samples.BizTalk.WoodgroveBank.PaymentTrackerPipelines.PaymentTrackerSendPipeline),&#xD;&#xA;        sendPipelineInputMessages,&#xD;&#xA;        LastPaymentRequestAfterSendPipeline&#xD;&#xA;    );&#xD;&#xA;//System.Diagnostics.Trace.WriteLine(&quot;Msg data format = &quot; + LastPaymentRequestAfterSendPipeline(MQSeries.MQMD_Format));&#xD;&#xA;//System.Diagnostics.Trace.WriteLine(&quot;Msg data format = &quot; + LastPaymentRequestAfterSendPipeline(MQSeries.MQCIH_Format));&#xD;&#xA;&#xD;&#xA;// Copy the SSO Ticket and the originator SID to the message so SSO can&#xD;&#xA;// happily redeem the ticket later.&#xD;&#xA;&#xD;&#xA;// Since we ran the pipeline from the orchestrations directly, we needed to set these&#xD;&#xA;// properties to the message that was returned from the send pipeline as opposed to&#xD;&#xA;// the message that went into the send pipeline.  When we transport the message using the &#xD;&#xA;// transport call inline, these properties will be retrieved and the SSO ticket&#xD;&#xA;// redeemed.&#xD;&#xA;LastPaymentRequestAfterSendPipeline(BTS.SSOTicket) = CustomerServiceRequest(BTS.SSOTicket);&#xD;&#xA;LastPaymentRequestAfterSendPipeline(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID) = CustomerServiceRequest(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID);&#xD;&#xA;LastPaymentRequestAfterSendPipeline(BTS.WindowsUser) = CustomerServiceRequest(BTS.WindowsUser);&#xD;&#xA;" />
                                                <om:Property Name="ReportToAnalyst" Value="False" />
                                                <om:Property Name="Name" Value="ExecuteSendPipeLineAndGetMessage" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="MessageRef" OID="04af9c94-f798-48cf-a257-147947580588" ParentLink="Construct_MessageRef" LowerBound="232.51" HigherBound="232.86">
                                                <om:Property Name="Ref" Value="LastPaymentRequestAfterSendPipeline" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="Catch" OID="37b74da1-8a96-468f-9682-a8d1318f0823" ParentLink="Scope_Catch" LowerBound="266.1" HigherBound="274.1">
                                            <om:Property Name="ExceptionName" Value="pipeEx" />
                                            <om:Property Name="ExceptionType" Value="Microsoft.XLANGs.Pipeline.XLANGPipelineManagerException" />
                                            <om:Property Name="IsFaultMessage" Value="False" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ExecuteSendPipelineExceptionHandler" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="VariableAssignment" OID="4ebd77bb-5b0b-420f-9436-6c54413a3f08" ParentLink="Catch_Statement" LowerBound="269.1" HigherBound="271.1">
                                                <om:Property Name="Expression" Value="System.Diagnostics.Trace.WriteLine(&quot;Exception while running the send pipeline: &quot; + pipeEx.ToString()); " />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="TraceSendPipelineException" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="Throw" OID="451a1c19-3245-46e2-8195-9d207ac1949c" ParentLink="Catch_Statement" LowerBound="271.1" HigherBound="273.1">
                                                <om:Property Name="ThrownReference" Value="pipeEx" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ThrowSendPipelineException" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="VariableDeclaration" OID="0c401305-13aa-41c0-8148-38fdf8fbfc07" ParentLink="Scope_VariableDeclaration" LowerBound="227.1" HigherBound="228.1">
                                            <om:Property Name="UseDefaultConstructor" Value="True" />
                                            <om:Property Name="Type" Value="Microsoft.XLANGs.Pipeline.SendPipelineInputMessages" />
                                            <om:Property Name="ParamDirection" Value="In" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="sendPipelineInputMessages" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="Scope" OID="c99c1bc0-f9d8-4577-8a15-dac9d22625ac" ParentLink="ComplexStatement_Statement" LowerBound="276.1" HigherBound="338.1">
                                        <om:Property Name="InitializedTransactionType" Value="True" />
                                        <om:Property Name="IsSynchronized" Value="False" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="PaymentTrackerExceptionHandlingScope" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Construct" OID="0c5943a0-9614-4e7c-9c7e-8d51c46d8c27" ParentLink="ComplexStatement_Statement" LowerBound="281.1" HigherBound="310.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="GetLastPaymentResponseInline" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageAssignment" OID="2f84cf4c-c5fb-4605-ac55-8f6200d76e92" ParentLink="ComplexStatement_Statement" LowerBound="284.1" HigherBound="309.1">
                                                <om:Property Name="Expression" Value="// Execute the inline method to send the message to the Payment Tracking System and get the response.&#xD;&#xA;// The response message received should be passed through the receive pipeline...&#xD;&#xA;&#xD;&#xA;LastPaymentResponseBeforeReceivePipeline = null;&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.PaymentTrackerCall.PaymentTrackerCaller.GetPaymentTrackerResponse &#xD;&#xA;   (&#xD;&#xA;        LastPaymentRequestAfterSendPipeline, LastPaymentResponseBeforeReceivePipeline&#xD;&#xA;    ); &#xD;&#xA;&#xD;&#xA;// Execute the receive pipeline using the helper class so we don't&#xD;&#xA;// need to declare the non-serializable types involved.&#xD;&#xA;&#xD;&#xA;// Set the documentspec name so the xml disassembler in the pipeline can resolve the schemas for the received message&#xD;&#xA;// without any ambiguity&#xD;&#xA;LastPaymentResponseBeforeReceivePipeline(XMLNORM.DocumentSpecName) = Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.GetConfigParameter(Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.SsoConfigParameter.PaymentTrackingReceivePipelineSchemaType);&#xD;&#xA;&#xD;&#xA;// Create an empty response message and fill it in with the real response from the Payment Tracking System&#xD;&#xA;LastPaymentResponse = null;&#xD;&#xA;&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.Utilities.ReceivePipelineHelper.CallReceivePipeline (&#xD;&#xA;        typeof(Microsoft.Samples.BizTalk.WoodgroveBank.PaymentTrackerPipelines.PaymentTrackerReceivePipeline),&#xD;&#xA;        LastPaymentResponseBeforeReceivePipeline,&#xD;&#xA;        LastPaymentResponse&#xD;&#xA;    );&#xD;&#xA;" />
                                                <om:Property Name="ReportToAnalyst" Value="False" />
                                                <om:Property Name="Name" Value="GetLastPaymentResponse" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessageRef" OID="34e8e0f5-e6d5-4f54-89d0-a829a0ffd87b" ParentLink="Construct_MessageRef" LowerBound="282.51" HigherBound="282.70">
                                                <om:Property Name="Ref" Value="LastPaymentResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessageRef" OID="75ab8db1-2278-4acf-b23f-666da1cca528" ParentLink="Construct_MessageRef" LowerBound="282.72" HigherBound="282.112">
                                                <om:Property Name="Ref" Value="LastPaymentResponseBeforeReceivePipeline" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="VariableAssignment" OID="2db9b3da-2100-4802-bf11-629a060fc22d" ParentLink="ComplexStatement_Statement" LowerBound="310.1" HigherBound="313.1">
                                            <om:Property Name="Expression" Value="// Check for errors&#xD;&#xA;errorLastPayments = LastPaymentResponse.ResponseStatus.Error.ErrorNumber != &quot;0000&quot;;&#xD;&#xA;" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ExamineForError" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                        <om:Element Type="Catch" OID="d0b24c6f-14fe-43d3-9309-eddfa28e0e5a" ParentLink="Scope_Catch" LowerBound="316.1" HigherBound="328.1">
                                            <om:Property Name="ExceptionName" Value="pmntTrackException" />
                                            <om:Property Name="ExceptionType" Value="Microsoft.XLANGs.BaseTypes.TimeoutException" />
                                            <om:Property Name="IsFaultMessage" Value="False" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="PaymentTrackerTimeoutHandler" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="VariableAssignment" OID="f2aff78b-eae2-464b-a90e-ab385b65070b" ParentLink="Catch_Statement" LowerBound="319.1" HigherBound="321.1">
                                                <om:Property Name="Expression" Value="errorLastPayments = true;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="AssignTimeoutError" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="Construct" OID="c6ac8d1d-a8a2-473d-b588-d9c8b24104fe" ParentLink="Catch_Statement" LowerBound="321.1" HigherBound="327.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="AssembleResponseMessageWithError" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="Transform" OID="7dfaa9cc-e408-4d4e-9672-71f773885f54" ParentLink="ComplexStatement_Statement" LowerBound="324.1" HigherBound="326.1">
                                                    <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_LastPaymentResponseTimeout" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="CreateLastPaymentResponse" />
                                                    <om:Property Name="Signal" Value="False" />
                                                    <om:Element Type="MessagePartRef" OID="14fb8323-3163-40ba-b1e5-bdbb5ab71287" ParentLink="Transform_InputMessagePartRef" LowerBound="325.182" HigherBound="325.204">
                                                        <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_21" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessagePartRef" OID="e7fd40bf-ed2d-42ea-aeb6-115841e0866e" ParentLink="Transform_OutputMessagePartRef" LowerBound="325.60" HigherBound="325.79">
                                                        <om:Property Name="MessageRef" Value="LastPaymentResponse" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_22" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="MessageRef" OID="917752bd-4572-4829-9796-aa81debd5d0d" ParentLink="Construct_MessageRef" LowerBound="322.55" HigherBound="322.74">
                                                    <om:Property Name="Ref" Value="LastPaymentResponse" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="Catch" OID="2d6345a3-cb44-40cc-b5c5-c4c3c2229d92" ParentLink="Scope_Catch" LowerBound="328.1" HigherBound="336.1">
                                            <om:Property Name="ExceptionName" Value="pipeEx" />
                                            <om:Property Name="ExceptionType" Value="Microsoft.XLANGs.Pipeline.XLANGPipelineManagerException" />
                                            <om:Property Name="IsFaultMessage" Value="False" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ExecuteReceivePiplineExceptionHandler" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="VariableAssignment" OID="1dc19d56-6c35-482b-88d1-24fee87a31c5" ParentLink="Catch_Statement" LowerBound="331.1" HigherBound="333.1">
                                                <om:Property Name="Expression" Value="System.Diagnostics.Trace.WriteLine(&quot;Exception while running the receive pipeline &quot; +  pipeEx.ToString());&#xD;&#xA;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="TraceReceivePipelineException" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="Throw" OID="74a22687-8082-40b6-b7fa-1fc14405960f" ParentLink="Catch_Statement" LowerBound="333.1" HigherBound="335.1">
                                                <om:Property Name="ThrownReference" Value="pipeEx" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ThrowReceivePipelineException" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="df258746-f679-45c1-9fd7-7a059cc81f2e" ParentLink="ComplexStatement_Statement" LowerBound="338.1" HigherBound="357.1">
                                        <om:Property Name="Expression" Value="// Calculate the response time&#xD;&#xA;endLastPaymentTime = System.DateTime.Now;&#xD;&#xA;lastPaymentDuration = endLastPaymentTime.Subtract(beginLastPaymentTime);&#xD;&#xA;&#xD;&#xA;// Create the BAM milestones...&#xD;&#xA;if (errorLastPayments)&#xD;&#xA;{&#xD;&#xA;    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackLastPaymentError(activityID, &#xD;&#xA;           System.Convert.ToInt32(lastPaymentDuration.TotalMilliseconds), &#xD;&#xA;           LastPaymentResponse.ResponseStatus.Error.ErrorNumber, &#xD;&#xA;           LastPaymentResponse.ResponseStatus.Error.ErrorDescription,&#xD;&#xA;           LastPaymentResponse.ResponseStatus.Error.ErrorSource);&#xD;&#xA;}&#xD;&#xA;else&#xD;&#xA;{&#xD;&#xA;    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackLastPaymentSuccess(activityID, &#xD;&#xA;          System.Convert.ToInt32(lastPaymentDuration.TotalMilliseconds));&#xD;&#xA;}" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="CreateBAMMilestones" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="ParallelBranch" OID="b76c5285-8e1f-4305-8994-53a942bf5589" ParentLink="ReallyComplexStatement_Branch" LowerBound="360.1" HigherBound="423.1">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="ParallelBranch_3" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="Construct" OID="53076f8f-e094-4afb-a6f3-e554bc32f6da" ParentLink="ComplexStatement_Statement" LowerBound="360.1" HigherBound="370.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ConstructPendingTransactionsRequest" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Transform" OID="f32c0473-d005-4979-b207-48bb0e8cb8d3" ParentLink="ComplexStatement_Statement" LowerBound="363.1" HigherBound="365.1">
                                            <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_PendingTransactionsRequest" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="CreatePendingTransactionsRequest" />
                                            <om:Property Name="Signal" Value="False" />
                                            <om:Element Type="MessagePartRef" OID="d2af848a-749b-445a-abda-8088332691ac" ParentLink="Transform_InputMessagePartRef" LowerBound="364.179" HigherBound="364.201">
                                                <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_7" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="533dd3bf-0eea-4f6c-a18b-e183b180f62b" ParentLink="Transform_OutputMessagePartRef" LowerBound="364.48" HigherBound="364.76">
                                                <om:Property Name="MessageRef" Value="PendingTransactionsWSRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_8" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="MessageAssignment" OID="c7680286-48bd-43fd-bedb-2997e8484c31" ParentLink="ComplexStatement_Statement" LowerBound="365.1" HigherBound="369.1">
                                            <om:Property Name="Expression" Value="PendingTransactionsWSRequest(BTS.SSOTicket) = CustomerServiceRequest(BTS.SSOTicket);&#xD;&#xA;PendingTransactionsWSRequest(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID) = CustomerServiceRequest(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID);&#xD;&#xA;PendingTransactionsWSRequest(BTS.WindowsUser) = CustomerServiceRequest(BTS.WindowsUser);" />
                                            <om:Property Name="ReportToAnalyst" Value="False" />
                                            <om:Property Name="Name" Value="CopyCredentials" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="MessageRef" OID="1dd85c68-e50b-4f39-b6d0-59990250431e" ParentLink="Construct_MessageRef" LowerBound="361.43" HigherBound="361.71">
                                            <om:Property Name="Ref" Value="PendingTransactionsWSRequest" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="af03458c-6b94-4f7c-b103-54cd64e601d7" ParentLink="ComplexStatement_Statement" LowerBound="370.1" HigherBound="372.1">
                                        <om:Property Name="Expression" Value="beginPendingTransTime = System.DateTime.Now;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="AssignBeginTime" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="Scope" OID="69464241-6ff7-4f4e-bf22-7f3ebdab9a29" ParentLink="ComplexStatement_Statement" LowerBound="372.1" HigherBound="405.1">
                                        <om:Property Name="InitializedTransactionType" Value="True" />
                                        <om:Property Name="IsSynchronized" Value="False" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="PendTransTimeoutDetectionScope" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Construct" OID="3b2fbc6c-59bc-4295-bc57-fbac85bed077" ParentLink="ComplexStatement_Statement" LowerBound="377.1" HigherBound="383.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="GetPendingTransactionsResponseInline" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageAssignment" OID="bb36c824-85c4-4f91-b31a-442c777b3f90" ParentLink="ComplexStatement_Statement" LowerBound="380.1" HigherBound="382.1">
                                                <om:Property Name="Expression" Value="PendingTransactionsWSResponse = Microsoft.Samples.BizTalk.WoodgroveBank.PendingTransactionsCall.PendingTransactionsCaller.GetPendingTransactionsResponse(PendingTransactionsWSRequest);" />
                                                <om:Property Name="ReportToAnalyst" Value="False" />
                                                <om:Property Name="Name" Value="GetPendingTransactionsResponse" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="MessageRef" OID="01d5e11c-e346-4475-b401-400a10f91e19" ParentLink="Construct_MessageRef" LowerBound="378.51" HigherBound="378.80">
                                                <om:Property Name="Ref" Value="PendingTransactionsWSResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="VariableAssignment" OID="a64e6d71-9d08-48cb-b0b1-d485a932b75c" ParentLink="ComplexStatement_Statement" LowerBound="383.1" HigherBound="386.1">
                                            <om:Property Name="Expression" Value="// Error if the error code is not 0000&#xD;&#xA;errorPendingTransactions = PendingTransactionsWSResponse.ResponseStatus.Error.ErrorNumber != &quot;0000&quot;;&#xD;&#xA;" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ExamineForErrors" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="Catch" OID="e790e9e0-69c4-49e5-909a-3a0dfb32a46f" ParentLink="Scope_Catch" LowerBound="389.1" HigherBound="403.1">
                                            <om:Property Name="ExceptionName" Value="pendTransTimeoutException" />
                                            <om:Property Name="ExceptionType" Value="Microsoft.XLANGs.BaseTypes.TimeoutException" />
                                            <om:Property Name="IsFaultMessage" Value="False" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="PendTransTimeoutHandler" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="VariableAssignment" OID="42329370-a3cb-4552-b481-1a2fcb0ab105" ParentLink="Catch_Statement" LowerBound="392.1" HigherBound="394.1">
                                                <om:Property Name="Expression" Value="errorPendingTransactions = true;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="AssignTimeoutError" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="VariableAssignment" OID="66b2f087-ea3d-428c-9528-f8687c026db6" ParentLink="Catch_Statement" LowerBound="394.1" HigherBound="396.1">
                                                <om:Property Name="Expression" Value="System.Diagnostics.Trace.WriteLine(&quot;Timeout from the Pending Transactions Web Service&quot;);&#xD;&#xA;" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Trace" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="Construct" OID="afc97035-eea2-4477-91bb-79bf059a2651" ParentLink="Catch_Statement" LowerBound="396.1" HigherBound="402.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ConstructPendTransRespWithTimeoutError" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="MessageRef" OID="23d96327-a0b2-4c6f-b4dc-963804cf7a1f" ParentLink="Construct_MessageRef" LowerBound="397.55" HigherBound="397.84">
                                                    <om:Property Name="Ref" Value="PendingTransactionsWSResponse" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                                <om:Element Type="Transform" OID="44b4cb65-05bc-430e-9a4f-c55e5aa36d50" ParentLink="ComplexStatement_Statement" LowerBound="399.1" HigherBound="401.1">
                                                    <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_PendingTransactionResponse" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="CreatePendTransRespWithTimeoutError" />
                                                    <om:Property Name="Signal" Value="True" />
                                                    <om:Element Type="MessagePartRef" OID="f4dd0643-000d-4947-8e8a-7f5f12c4e4bb" ParentLink="Transform_InputMessagePartRef" LowerBound="400.192" HigherBound="400.214">
                                                        <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_25" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessagePartRef" OID="5090767a-0d72-4647-b4bf-2f440b43a783" ParentLink="Transform_OutputMessagePartRef" LowerBound="400.60" HigherBound="400.89">
                                                        <om:Property Name="MessageRef" Value="PendingTransactionsWSResponse" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_26" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                </om:Element>
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="5436e432-f22a-4a90-a013-7837308e5ae8" ParentLink="ComplexStatement_Statement" LowerBound="405.1" HigherBound="423.1">
                                        <om:Property Name="Expression" Value="endPendingTransTime = System.DateTime.Now;&#xD;&#xA;pendingTransDuration = endPendingTransTime.Subtract(beginPendingTransTime);&#xD;&#xA;&#xD;&#xA;// Create the BAM milestones...&#xD;&#xA;if (errorPendingTransactions)&#xD;&#xA;{&#xD;&#xA;    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackPendingTransactionsError(activityID, &#xD;&#xA;           System.Convert.ToInt32(pendingTransDuration.TotalMilliseconds), &#xD;&#xA;           PendingTransactionsWSResponse.ResponseStatus.Error.ErrorNumber,&#xD;&#xA;           PendingTransactionsWSResponse.ResponseStatus.Error.ErrorDescription,&#xD;&#xA;           PendingTransactionsWSResponse.ResponseStatus.Error.ErrorSource);&#xD;&#xA;}&#xD;&#xA;else&#xD;&#xA;{&#xD;&#xA;    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackPendingTransactionsSuccess(activityID, &#xD;&#xA;          System.Convert.ToInt32(pendingTransDuration.TotalMilliseconds));&#xD;&#xA;}" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="CreateBAMMilestones" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Decision" OID="8f28fe58-ede9-428b-9684-19829e13ff0d" ParentLink="ComplexStatement_Statement" LowerBound="425.1" HigherBound="456.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="CheckErrorAndAggregate" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="d8175eed-f72b-4a85-aaad-c9ab7bddab71" ParentLink="ReallyComplexStatement_Branch" LowerBound="426.25" HigherBound="441.1">
                                    <om:Property Name="Expression" Value="errorCreditLimit || errorLastPayments  || errorPendingTransactions " />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Error" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="Construct" OID="016c0163-d398-4209-8dff-de0635ee5eb6" ParentLink="ComplexStatement_Statement" LowerBound="428.1" HigherBound="434.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ConstructCustomerServiceErrorResponse" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="MessageRef" OID="60166632-e821-4ef4-9066-d15674601cc7" ParentLink="Construct_MessageRef" LowerBound="429.39" HigherBound="429.62">
                                            <om:Property Name="Ref" Value="CustomerServiceResponse" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                        <om:Element Type="Transform" OID="ba8919a6-451e-4738-90e2-b103e814a49c" ParentLink="ComplexStatement_Statement" LowerBound="431.1" HigherBound="433.1">
                                            <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.Aggregate_To_ErrorResponse" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="AggregateErrorResponse" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessagePartRef" OID="d7eab1ad-7d5a-4bd6-a684-fed4fe430a41" ParentLink="Transform_InputMessagePartRef" LowerBound="432.144" HigherBound="432.166">
                                                <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_14" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="3ca0fde4-2c98-4e3c-904f-19f2a14e47a4" ParentLink="Transform_InputMessagePartRef" LowerBound="432.168" HigherBound="432.187">
                                                <om:Property Name="MessageRef" Value="CreditLimitResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_15" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="a20416aa-34ad-4cd1-bd5d-4bd4d1789d50" ParentLink="Transform_InputMessagePartRef" LowerBound="432.189" HigherBound="432.208">
                                                <om:Property Name="MessageRef" Value="LastPaymentResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_16" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="d3ccc01d-b7d4-466e-adf3-d319b72c534b" ParentLink="Transform_InputMessagePartRef" LowerBound="432.210" HigherBound="432.239">
                                                <om:Property Name="MessageRef" Value="PendingTransactionsWSResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_18" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="1682b0a4-e712-40c3-8d13-bf53eee2073c" ParentLink="Transform_OutputMessagePartRef" LowerBound="432.44" HigherBound="432.67">
                                                <om:Property Name="MessageRef" Value="CustomerServiceResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_17" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="1b838a2f-b0ea-469d-bda5-e7bfdb5ad245" ParentLink="ComplexStatement_Statement" LowerBound="434.1" HigherBound="440.1">
                                        <om:Property Name="Expression" Value="endTime = System.DateTime.Now;&#xD;&#xA;&#xD;&#xA;timeTaken = endTime.Subtract(beginTime);&#xD;&#xA;&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestCompleteError(activityID, System.Convert.ToInt32(timeTaken.TotalMilliseconds), CustomerServiceResponse.ResponseStatus.Error.ErrorNumber, CustomerServiceResponse.ResponseStatus.Error.ErrorDescription, CustomerServiceResponse.ResponseStatus.Error.ErrorSource);" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="CreateBAMMilestone" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="75ef3875-89ca-42b3-8569-c1ef91a05e6a" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="Construct" OID="a76878e1-8856-47a7-a191-4fc82bd51560" ParentLink="ComplexStatement_Statement" LowerBound="443.1" HigherBound="449.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ConstructCustomerServiceResponse" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="MessageRef" OID="1a389471-7cc5-45a0-9682-efb51e6cb1df" ParentLink="Construct_MessageRef" LowerBound="444.39" HigherBound="444.62">
                                            <om:Property Name="Ref" Value="CustomerServiceResponse" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                        <om:Element Type="Transform" OID="2dd1f67c-a7ba-4671-bbf3-719a5833e5ae" ParentLink="ComplexStatement_Statement" LowerBound="446.1" HigherBound="448.1">
                                            <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.Aggregate_To_CustomerServiceResponse" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="AggregateCustomerServiceResponse" />
                                            <om:Property Name="Signal" Value="False" />
                                            <om:Element Type="MessagePartRef" OID="5439b0b2-68c8-4e55-bdf8-182e597c467f" ParentLink="Transform_InputMessagePartRef" LowerBound="447.154" HigherBound="447.176">
                                                <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_9" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="a3135e3d-8c30-445e-b15d-b9d5a7717887" ParentLink="Transform_InputMessagePartRef" LowerBound="447.178" HigherBound="447.197">
                                                <om:Property Name="MessageRef" Value="CreditLimitResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_10" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="2d1003dc-a3af-40f1-bbc8-e0a4bc54d2a8" ParentLink="Transform_InputMessagePartRef" LowerBound="447.199" HigherBound="447.218">
                                                <om:Property Name="MessageRef" Value="LastPaymentResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_11" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="8fdd47c0-2b36-4a3b-be10-0c9495177e66" ParentLink="Transform_InputMessagePartRef" LowerBound="447.220" HigherBound="447.249">
                                                <om:Property Name="MessageRef" Value="PendingTransactionsWSResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_12" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessagePartRef" OID="1243a8ba-41f1-4514-b404-6e16df4762cc" ParentLink="Transform_OutputMessagePartRef" LowerBound="447.44" HigherBound="447.67">
                                                <om:Property Name="MessageRef" Value="CustomerServiceResponse" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="MessagePartReference_13" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="2b60c131-8c2c-4151-97fc-fedb5992423a" ParentLink="ComplexStatement_Statement" LowerBound="449.1" HigherBound="455.1">
                                        <om:Property Name="Expression" Value="endTime = System.DateTime.Now;&#xD;&#xA;&#xD;&#xA;timeTaken = endTime.Subtract(beginTime);&#xD;&#xA;&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestCompleteSuccess(activityID, System.Convert.ToInt32(timeTaken.TotalMilliseconds));&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="CreateBAMMilestone" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                        </om:Element>
                        <om:Element Type="DecisionBranch" OID="60048bcd-be0c-497f-aecf-9d7b7a2ce6a0" ParentLink="ReallyComplexStatement_Branch">
                            <om:Property Name="IsGhostBranch" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Else" />
                            <om:Property Name="Signal" Value="False" />
                            <om:Element Type="Construct" OID="08f742ea-f0e0-4d8b-896b-684731d7bc43" ParentLink="ComplexStatement_Statement" LowerBound="459.1" HigherBound="469.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="ConstructRequestDenied" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="Transform" OID="490182b9-8bd4-4068-8252-cfe99b3af189" ParentLink="ComplexStatement_Statement" LowerBound="462.1" HigherBound="464.1">
                                    <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CustomerServiceResponseDenied" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="CreateRequestDenied" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="MessagePartRef" OID="5c245741-0a75-4635-a89b-0a88907f53e4" ParentLink="Transform_InputMessagePartRef" LowerBound="463.169" HigherBound="463.191">
                                        <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="MessagePartReference_1" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="MessagePartRef" OID="88104aa0-e03f-428e-a89f-be45e29e76de" ParentLink="Transform_OutputMessagePartRef" LowerBound="463.40" HigherBound="463.63">
                                        <om:Property Name="MessageRef" Value="CustomerServiceResponse" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="MessagePartReference_2" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="MessageAssignment" OID="a35ceca6-1e88-49d6-b08c-c376f576aa45" ParentLink="ComplexStatement_Statement" LowerBound="464.1" HigherBound="468.1">
                                    <om:Property Name="Expression" Value="CustomerServiceResponse.ResponseStatus.Error.ErrorNumber = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceInvalidRequest;&#xD;&#xA;CustomerServiceResponse.ResponseStatus.Error.ErrorDescription = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorDescription(Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceInvalidRequest);&#xD;&#xA;CustomerServiceResponse.ResponseStatus.Error.ErrorSource = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorSource(Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceInvalidRequest);" />
                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                    <om:Property Name="Name" Value="AssignErrorInformation" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessageRef" OID="d308270e-6d3d-4eb1-bb20-f2eb4fe677c6" ParentLink="Construct_MessageRef" LowerBound="460.35" HigherBound="460.58">
                                    <om:Property Name="Ref" Value="CustomerServiceResponse" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="VariableAssignment" OID="eaeb8ca5-7eb3-4186-b697-f817f7ab9786" ParentLink="ComplexStatement_Statement" LowerBound="469.1" HigherBound="475.1">
                                <om:Property Name="Expression" Value="endTime = System.DateTime.Now;&#xD;&#xA;&#xD;&#xA;timeTaken = endTime.Subtract(beginTime);&#xD;&#xA;&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackInvalidRequest(activityID, System.Convert.ToInt32(timeTaken.TotalMilliseconds));" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="CreateBAMMielstone" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                    <om:Element Type="VariableAssignment" OID="e30dba98-c39b-4a4d-b22d-8fadf7e0d5fa" ParentLink="ComplexStatement_Statement" LowerBound="476.1" HigherBound="479.1">
                        <om:Property Name="Expression" Value="// Complete the activity...&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.EndRequest(activityID);" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="EndActivity" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="Catch" OID="14ddda60-0c5a-4b40-9e50-c78bac1f6898" ParentLink="Scope_Catch" LowerBound="482.1" HigherBound="515.1">
                        <om:Property Name="ExceptionName" Value="ex" />
                        <om:Property Name="ExceptionType" Value="System.Exception" />
                        <om:Property Name="IsFaultMessage" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="CustomerServiceExceptionHandler" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Decision" OID="48e3617d-c802-4fe5-94c8-7543402aa0e8" ParentLink="Catch_Statement" LowerBound="485.1" HigherBound="502.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="checkForActivity" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="DecisionBranch" OID="557a948c-fb40-4f63-9516-746d84dc3f63" ParentLink="ReallyComplexStatement_Branch" LowerBound="486.25" HigherBound="502.1">
                                <om:Property Name="Expression" Value="activityID != null" />
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Activity Began" />
                                <om:Property Name="Signal" Value="False" />
                                <om:Element Type="VariableAssignment" OID="53f66f0e-d669-4ecd-aebd-a62d626e1a5d" ParentLink="ComplexStatement_Statement" LowerBound="488.1" HigherBound="501.1">
                                    <om:Property Name="Expression" Value="&#xD;&#xA;// An Exception is treated as an error from the BAM perspective...&#xD;&#xA;&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestCompleteError(&#xD;&#xA;                            activityID, &#xD;&#xA;                            0, &#xD;&#xA;                            Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceExceptionError,&#xD;&#xA;                            ex.Message, &#xD;&#xA;                            &quot;Customer Service Orchestration&quot;&#xD;&#xA;        );&#xD;&#xA;// Complete the activity...&#xD;&#xA;Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.EndRequest(activityID);" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="EndActivityInException" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="DecisionBranch" OID="c1100e9b-6220-4214-94a3-e06a9d52b711" ParentLink="ReallyComplexStatement_Branch">
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Else" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="VariableAssignment" OID="c4a84fe9-48c4-42bd-bc59-398ed778c745" ParentLink="Catch_Statement" LowerBound="502.1" HigherBound="504.1">
                            <om:Property Name="Expression" Value="System.Diagnostics.Trace.Write(&quot;Exception in Orchestration: &quot; + ex.ToString());" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="TraceException" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Construct" OID="c5928f37-54e8-4c7e-8ed6-20dff27e150b" ParentLink="Catch_Statement" LowerBound="504.1" HigherBound="514.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="RespondUnderException" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Transform" OID="59c3d483-4449-424a-b9eb-89ec28bc4b79" ParentLink="ComplexStatement_Statement" LowerBound="507.1" HigherBound="509.1">
                                <om:Property Name="ClassName" Value="Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CustomerServiceResponseDenied" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="CreateResponseForException" />
                                <om:Property Name="Signal" Value="False" />
                                <om:Element Type="MessagePartRef" OID="5269a345-ec4f-43f3-8864-6f0ce60b4d25" ParentLink="Transform_InputMessagePartRef" LowerBound="508.169" HigherBound="508.191">
                                    <om:Property Name="MessageRef" Value="CustomerServiceRequest" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="MessagePartReference_19" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessagePartRef" OID="f866bf8d-e267-4df9-b0c3-0ecf74d7b3e0" ParentLink="Transform_OutputMessagePartRef" LowerBound="508.40" HigherBound="508.63">
                                    <om:Property Name="MessageRef" Value="CustomerServiceResponse" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="MessagePartReference_20" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="MessageAssignment" OID="56014054-2e86-47ee-b5a5-c93cdcffd500" ParentLink="ComplexStatement_Statement" LowerBound="509.1" HigherBound="513.1">
                                <om:Property Name="Expression" Value="CustomerServiceResponse.ResponseStatus.Error.ErrorNumber = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceExceptionError;&#xD;&#xA;CustomerServiceResponse.ResponseStatus.Error.ErrorDescription = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorDescription(ex);&#xD;&#xA;CustomerServiceResponse.ResponseStatus.Error.ErrorSource = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorSource(Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceExceptionError);" />
                                <om:Property Name="ReportToAnalyst" Value="False" />
                                <om:Property Name="Name" Value="AssignErrorInfo" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="MessageRef" OID="2718da25-bdb4-47f1-87ce-cfddd40dadfe" ParentLink="Construct_MessageRef" LowerBound="505.35" HigherBound="505.58">
                                <om:Property Name="Ref" Value="CustomerServiceResponse" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module Microsoft.Samples.BizTalk.WoodgroveBank.Orchestrations.Inline
{
    public porttype CustomerServicePortType
    {
        requestresponse GetAccountInfo
        {
            Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceRequest, Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceResponse
        };
    };
    internal porttype PaymentTrackingSystemRequestPortType
    {
        oneway SendPmtTrackRequest
        {
            Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentRequest
        };
    };
    internal porttype PaymentTrackingSystemResponsePortType
    {
        oneway ReceivePmtTrackRespone
        {
            Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentResponse
        };
    };
    internal porttype SAPPortType
    {
        requestresponse SAPRequestResponse
        {
            Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Request, Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Response
        };
    };
    internal porttype PortType_1
    {
        oneway Operation_1
        {
            System.Xml.XmlDocument
        };
    };
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    internal service CustomerService
    {
        message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentRequest LastPaymentRequest;
        message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.LastPaymentResponse LastPaymentResponse;
        message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.PendingTransactionsRequest PendingTransactionsWSRequest;
        message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.PendingTransactionsResponse PendingTransactionsWSResponse;
        message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Request CreditLimitRequest;
        message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.BAPI_BANKACCT_GET_DETAIL.BAPI_BANKACCT_GET_DETAIL_Response CreditLimitResponse;
        message System.Xml.XmlDocument LastPaymentRequestAfterSendPipeline;
        message System.Xml.XmlDocument LastPaymentResponseBeforeReceivePipeline;
        System.String customerName;
        System.String zipCode;
        System.Boolean RequestIsValid;
        System.Boolean errorLastPayments;
        System.Boolean errorPendingTransactions;
        System.Boolean errorCreditLimit;
        System.DateTime beginCreditLimitTime;
        System.DateTime endCreditLimitTime;
        System.DateTime beginLastPaymentTime;
        System.DateTime endLastPaymentTime;
        System.DateTime beginPendingTransTime;
        System.DateTime endPendingTransTime;
        System.TimeSpan creditLimitDuration;
        System.TimeSpan lastPaymentDuration;
        System.TimeSpan pendingTransDuration;
        System.String activityID;
        System.DateTime beginTime;
        System.DateTime endTime;
        System.TimeSpan timeTaken;
        System.String sapReturnCode;
        System.String accountNumber;
        body (message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceRequest CustomerServiceRequest, out message Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceResponse CustomerServiceResponse)
        {
            customerName = "";
            zipCode = "";
            RequestIsValid = true;
            errorLastPayments = true;
            errorPendingTransactions = true;
            errorCreditLimit = true;
            activityID = null;
            sapReturnCode = "";
            accountNumber = "";
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("fd1b8c03-9639-45f2-a5d8-4ec620f6f729")]
            scope
            {
                body
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("1be60852-ac5a-451f-8512-48e7b37bf9a8")]
                    // Begin the BAM activity
                    
                    activityID = Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.BeginRequest(CustomerServiceRequest.RequestSource, CustomerServiceRequest.RequestType);
                    
                    // Save starting time for later computing response times...
                    beginTime = System.DateTime.Now;
                    
                    // Request Received Milestone
                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestReceived(activityID);
                            
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("618154cb-f61d-4a73-8ab5-064e94804239")]
                    // Validate the input request based on the contents of the AuthenticationInfo element.
                    // The AuthenticationInfo elements contains name/value pairs for authenticating the customer
                    // We must either have a ZipCode or a CustomerName to declare that this a valid request.
                    // Validating the message based on the contents of the request is done in one or more
                    // of the back end systems...
                    
                    customerName  = xpath(CustomerServiceRequest, 
                    "string(/*[local-name()='CustomerServiceRequest']/*[local-name()='Body']/*[local-name()='AuthenticationInfo'][DataElementName='CustomerName']/*[local-name()='DataElementValue'])");
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("60cf248e-f3e1-4140-8206-cf7a44606e1f")]
                    //Get the zipCode out of the message...
                    
                    zipCode = xpath(CustomerServiceRequest, 
                    "string(/*[local-name()='CustomerServiceRequest']/*[local-name()='Body']/*[local-name()='AuthenticationInfo'][DataElementName='ZipCode']/*[local-name()='DataElementValue'])");
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("b338d67b-b635-4a7f-a744-15eb4b4afbf7")]
                    //Get the Account Number out of the message...
                    
                    accountNumber = CustomerServiceRequest.Body.AccountNumber;
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("38ded481-39cf-494e-b7eb-4c7bcb85d0f2")]
                    // One of the authentication values must be there in the message in order to proceed
                    // And the account number must be there also.
                    // And the account number must be valid...
                    RequestIsValid = (zipCode != "" || customerName != "") && 
                                        accountNumber != "" &&
                                        Microsoft.Samples.BizTalk.WoodgroveBank.Utilities.CustomerServiceHelper.IsAccountNumberValid(accountNumber) ;
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("a906930a-c276-4e60-8dee-82e85786f2bb")]
                    if (RequestIsValid )
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("fa8184fc-286c-4670-916a-11e9f805a7f5")]
                        parallel
                        {
                            task
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("e5169b60-24d6-4885-af33-74d9102ed252")]
                                construct CreditLimitRequest
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("cb744ab2-e9b3-4b23-9c31-587adb18ce5c")]
                                    transform (CreditLimitRequest) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CreditLimiRequest (CustomerServiceRequest);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("2afe7bce-0978-49fe-b1be-cd744645d460")]
                                beginCreditLimitTime = System.DateTime.Now;
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("ba9f57c2-44d7-4eff-88dd-7fca8f0b19a7")]
                                scope
                                {
                                    body
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("e8d80a59-a7c1-4ae5-9e57-6ad1e7b4ffa5")]
                                        construct CreditLimitResponse
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("4c3e6696-8705-40f2-b463-95c9376c750c")]
                                            CreditLimitResponse = Microsoft.Samples.BizTalk.WoodgroveBank.StubSapCall.StubSapCallHelper.GetAccountDetails(CreditLimitRequest);
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("cbe12065-a1d1-45ee-8bdd-8ac586ab85bd")]
                                        // Examine the SAP return code
                                        
                                        sapReturnCode = (System.String) xpath(CreditLimitResponse, 
                                        "string(/*[local-name()='BAPI_BANKACCT_GET_DETAIL_Response']/*[local-name()='E_RC'])");
                                        
                                        errorCreditLimit = sapReturnCode != "";
                                    }
                                    exceptions
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("4a269b78-ebe2-44e2-802c-255f0f38ef94")]
                                        catch (Microsoft.XLANGs.BaseTypes.TimeoutException sapTimeoutException)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("806b0e50-c920-4416-aada-c4b32c6028e2")]
                                            errorCreditLimit = true;
                                            
                                            sapReturnCode = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.SapTimeoutErrorCode() ;
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("e98d186c-5480-4047-9e14-9cd9c559af67")]
                                            System.Diagnostics.Trace.WriteLine("Timeout from SAP");
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("ce80b779-0457-4dc7-839a-2927743656e0")]
                                            construct CreditLimitResponse
                                            {
                                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("26da375a-e313-43e7-86ca-bbbaed50b7a3")]
                                                transform (CreditLimitResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CreditLimitResponse (CustomerServiceRequest);
                                            }
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("56ec757c-a262-4927-883f-100f0ed0d429")]
                                            System.Diagnostics.Trace.WriteLine("Constructed SAP Response Message");
                                            
                                            //xd1 = CreditLimitResponse ;
                                            //System.Diagnostics.Trace.Write("CreditLimitResponse = " + xd1.OuterXml);
                                        }
                                    }
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("bcb6269f-e823-436f-8cfd-71a71579f727")]
                                endCreditLimitTime = System.DateTime.Now;
                                creditLimitDuration = endCreditLimitTime.Subtract(beginCreditLimitTime);
                                
                                // Create the appropriate BAM milestones...
                                if (errorCreditLimit)
                                {
                                    // Map SAP return code to appropriate descriptions here...
                                
                                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackCreditLimitError
                                       (
                                           activityID, 
                                           System.Convert.ToInt32(creditLimitDuration.TotalMilliseconds),
                                           sapReturnCode,
                                           Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.DecodeSapErrorCodeToDescription(sapReturnCode),
                                           Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.DecodeSapErrorCodeToSource(sapReturnCode)
                                       );       
                                }
                                else
                                {
                                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackCreditLimitSuccess(activityID, 
                                          System.Convert.ToInt32(creditLimitDuration.TotalMilliseconds));
                                }
                            }
                            task
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("85e96c88-a9d9-453e-ae0a-5262afe657ee")]
                                construct LastPaymentRequest
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("21089c4b-bf08-469e-bf30-9fc772892925")]
                                    transform (LastPaymentRequest) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_LastPaymentRequest (CustomerServiceRequest);
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("116fbcee-e496-4a6e-b05b-0aae90c154c8")]
                                    
                                    // Set the document spec so the send pipeline can resolve the schemas without any ambiguity
                                    
                                    LastPaymentRequest(XMLNORM.DocumentSpecName)= Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.GetConfigParameter(Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.SsoConfigParameter.PaymentTrackingSendPipelineSchemaType);
                                    
                                    
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("39967bb6-4dd3-4453-b118-99546b29931c")]
                                beginLastPaymentTime = System.DateTime.Now;
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("7554a188-e12f-4dd7-ba4c-6cb4d01a4321")]
                                scope
                                {
                                    Microsoft.XLANGs.Pipeline.SendPipelineInputMessages sendPipelineInputMessages;
                                    body
                                    {
                                        sendPipelineInputMessages = new Microsoft.XLANGs.Pipeline.SendPipelineInputMessages();
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("3a0267bb-327f-402e-b552-05cd0d17e775")]
                                        construct LastPaymentRequestAfterSendPipeline
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("b4d201dd-299a-4b88-bd2e-586251c087fb")]
                                            // Create the collection of messages to be sent to the send pipeline...
                                            sendPipelineInputMessages = new Microsoft.XLANGs.Pipeline.SendPipelineInputMessages();
                                            sendPipelineInputMessages.Add(LastPaymentRequest);
                                            
                                            // Create an empty message for the output from the pipeline...
                                            LastPaymentRequestAfterSendPipeline = null;
                                            
                                            // Execute the send pipeline and get the message output from the send pipeline.
                                            Microsoft.XLANGs.Pipeline.XLANGPipelineManager.ExecuteSendPipeline(
                                                    typeof(Microsoft.Samples.BizTalk.WoodgroveBank.PaymentTrackerPipelines.PaymentTrackerSendPipeline),
                                                    sendPipelineInputMessages,
                                                    LastPaymentRequestAfterSendPipeline
                                                );
                                            //System.Diagnostics.Trace.WriteLine("Msg data format = " + LastPaymentRequestAfterSendPipeline(MQSeries.MQMD_Format));
                                            //System.Diagnostics.Trace.WriteLine("Msg data format = " + LastPaymentRequestAfterSendPipeline(MQSeries.MQCIH_Format));
                                            
                                            // Copy the SSO Ticket and the originator SID to the message so SSO can
                                            // happily redeem the ticket later.
                                            
                                            // Since we ran the pipeline from the orchestrations directly, we needed to set these
                                            // properties to the message that was returned from the send pipeline as opposed to
                                            // the message that went into the send pipeline.  When we transport the message using the 
                                            // transport call inline, these properties will be retrieved and the SSO ticket
                                            // redeemed.
                                            LastPaymentRequestAfterSendPipeline(BTS.SSOTicket) = CustomerServiceRequest(BTS.SSOTicket);
                                            LastPaymentRequestAfterSendPipeline(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID) = CustomerServiceRequest(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID);
                                            LastPaymentRequestAfterSendPipeline(BTS.WindowsUser) = CustomerServiceRequest(BTS.WindowsUser);
                                        }
                                    }
                                    exceptions
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("37b74da1-8a96-468f-9682-a8d1318f0823")]
                                        catch (Microsoft.XLANGs.Pipeline.XLANGPipelineManagerException pipeEx)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("4ebd77bb-5b0b-420f-9436-6c54413a3f08")]
                                            System.Diagnostics.Trace.WriteLine("Exception while running the send pipeline: " + pipeEx.ToString()); 
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("451a1c19-3245-46e2-8195-9d207ac1949c")]
                                            throw pipeEx;
                                        }
                                    }
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("c99c1bc0-f9d8-4577-8a15-dac9d22625ac")]
                                scope
                                {
                                    body
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("0c5943a0-9614-4e7c-9c7e-8d51c46d8c27")]
                                        construct LastPaymentResponse, LastPaymentResponseBeforeReceivePipeline
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("2f84cf4c-c5fb-4605-ac55-8f6200d76e92")]
                                            // Execute the inline method to send the message to the Payment Tracking System and get the response.
                                            // The response message received should be passed through the receive pipeline...
                                            
                                            LastPaymentResponseBeforeReceivePipeline = null;
                                            Microsoft.Samples.BizTalk.WoodgroveBank.PaymentTrackerCall.PaymentTrackerCaller.GetPaymentTrackerResponse 
                                               (
                                                    LastPaymentRequestAfterSendPipeline, LastPaymentResponseBeforeReceivePipeline
                                                ); 
                                            
                                            // Execute the receive pipeline using the helper class so we don't
                                            // need to declare the non-serializable types involved.
                                            
                                            // Set the documentspec name so the xml disassembler in the pipeline can resolve the schemas for the received message
                                            // without any ambiguity
                                            LastPaymentResponseBeforeReceivePipeline(XMLNORM.DocumentSpecName) = Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.GetConfigParameter(Microsoft.Samples.BizTalk.WoodgroveBank.ConfigHelper.ConfigParameters.SsoConfigParameter.PaymentTrackingReceivePipelineSchemaType);
                                            
                                            // Create an empty response message and fill it in with the real response from the Payment Tracking System
                                            LastPaymentResponse = null;
                                            
                                            Microsoft.Samples.BizTalk.WoodgroveBank.Utilities.ReceivePipelineHelper.CallReceivePipeline (
                                                    typeof(Microsoft.Samples.BizTalk.WoodgroveBank.PaymentTrackerPipelines.PaymentTrackerReceivePipeline),
                                                    LastPaymentResponseBeforeReceivePipeline,
                                                    LastPaymentResponse
                                                );
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("2db9b3da-2100-4802-bf11-629a060fc22d")]
                                        // Check for errors
                                        errorLastPayments = LastPaymentResponse.ResponseStatus.Error.ErrorNumber != "0000";
                                    }
                                    exceptions
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("d0b24c6f-14fe-43d3-9309-eddfa28e0e5a")]
                                        catch (Microsoft.XLANGs.BaseTypes.TimeoutException pmntTrackException)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("f2aff78b-eae2-464b-a90e-ab385b65070b")]
                                            errorLastPayments = true;
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("c6ac8d1d-a8a2-473d-b588-d9c8b24104fe")]
                                            construct LastPaymentResponse
                                            {
                                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("7dfaa9cc-e408-4d4e-9672-71f773885f54")]
                                                transform (LastPaymentResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_LastPaymentResponseTimeout (CustomerServiceRequest);
                                            }
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("2d6345a3-cb44-40cc-b5c5-c4c3c2229d92")]
                                        catch (Microsoft.XLANGs.Pipeline.XLANGPipelineManagerException pipeEx)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("1dc19d56-6c35-482b-88d1-24fee87a31c5")]
                                            System.Diagnostics.Trace.WriteLine("Exception while running the receive pipeline " +  pipeEx.ToString());
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("74a22687-8082-40b6-b7fa-1fc14405960f")]
                                            throw pipeEx;
                                        }
                                    }
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("df258746-f679-45c1-9fd7-7a059cc81f2e")]
                                // Calculate the response time
                                endLastPaymentTime = System.DateTime.Now;
                                lastPaymentDuration = endLastPaymentTime.Subtract(beginLastPaymentTime);
                                
                                // Create the BAM milestones...
                                if (errorLastPayments)
                                {
                                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackLastPaymentError(activityID, 
                                           System.Convert.ToInt32(lastPaymentDuration.TotalMilliseconds), 
                                           LastPaymentResponse.ResponseStatus.Error.ErrorNumber, 
                                           LastPaymentResponse.ResponseStatus.Error.ErrorDescription,
                                           LastPaymentResponse.ResponseStatus.Error.ErrorSource);
                                }
                                else
                                {
                                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackLastPaymentSuccess(activityID, 
                                          System.Convert.ToInt32(lastPaymentDuration.TotalMilliseconds));
                                }
                            }
                            task
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("53076f8f-e094-4afb-a6f3-e554bc32f6da")]
                                construct PendingTransactionsWSRequest
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("f32c0473-d005-4979-b207-48bb0e8cb8d3")]
                                    transform (PendingTransactionsWSRequest) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_PendingTransactionsRequest (CustomerServiceRequest);
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("c7680286-48bd-43fd-bedb-2997e8484c31")]
                                    PendingTransactionsWSRequest(BTS.SSOTicket) = CustomerServiceRequest(BTS.SSOTicket);
                                    PendingTransactionsWSRequest(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID) = CustomerServiceRequest(Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID);
                                    PendingTransactionsWSRequest(BTS.WindowsUser) = CustomerServiceRequest(BTS.WindowsUser);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("af03458c-6b94-4f7c-b103-54cd64e601d7")]
                                beginPendingTransTime = System.DateTime.Now;
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("69464241-6ff7-4f4e-bf22-7f3ebdab9a29")]
                                scope
                                {
                                    body
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("3b2fbc6c-59bc-4295-bc57-fbac85bed077")]
                                        construct PendingTransactionsWSResponse
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("bb36c824-85c4-4f91-b31a-442c777b3f90")]
                                            PendingTransactionsWSResponse = Microsoft.Samples.BizTalk.WoodgroveBank.PendingTransactionsCall.PendingTransactionsCaller.GetPendingTransactionsResponse(PendingTransactionsWSRequest);
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("a64e6d71-9d08-48cb-b0b1-d485a932b75c")]
                                        // Error if the error code is not 0000
                                        errorPendingTransactions = PendingTransactionsWSResponse.ResponseStatus.Error.ErrorNumber != "0000";
                                    }
                                    exceptions
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("e790e9e0-69c4-49e5-909a-3a0dfb32a46f")]
                                        catch (Microsoft.XLANGs.BaseTypes.TimeoutException pendTransTimeoutException)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("42329370-a3cb-4552-b481-1a2fcb0ab105")]
                                            errorPendingTransactions = true;
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("66b2f087-ea3d-428c-9528-f8687c026db6")]
                                            System.Diagnostics.Trace.WriteLine("Timeout from the Pending Transactions Web Service");
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("afc97035-eea2-4477-91bb-79bf059a2651")]
                                            construct PendingTransactionsWSResponse
                                            {
                                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("44b4cb65-05bc-430e-9a4f-c55e5aa36d50")]
                                                transform (PendingTransactionsWSResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_PendingTransactionResponse (CustomerServiceRequest);
                                            }
                                        }
                                    }
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("5436e432-f22a-4a90-a013-7837308e5ae8")]
                                endPendingTransTime = System.DateTime.Now;
                                pendingTransDuration = endPendingTransTime.Subtract(beginPendingTransTime);
                                
                                // Create the BAM milestones...
                                if (errorPendingTransactions)
                                {
                                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackPendingTransactionsError(activityID, 
                                           System.Convert.ToInt32(pendingTransDuration.TotalMilliseconds), 
                                           PendingTransactionsWSResponse.ResponseStatus.Error.ErrorNumber,
                                           PendingTransactionsWSResponse.ResponseStatus.Error.ErrorDescription,
                                           PendingTransactionsWSResponse.ResponseStatus.Error.ErrorSource);
                                }
                                else
                                {
                                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackPendingTransactionsSuccess(activityID, 
                                          System.Convert.ToInt32(pendingTransDuration.TotalMilliseconds));
                                }
                            }
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("8f28fe58-ede9-428b-9684-19829e13ff0d")]
                        if (errorCreditLimit || errorLastPayments  || errorPendingTransactions )
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("016c0163-d398-4209-8dff-de0635ee5eb6")]
                            construct CustomerServiceResponse
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("ba8919a6-451e-4738-90e2-b103e814a49c")]
                                transform (CustomerServiceResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.Aggregate_To_ErrorResponse (CustomerServiceRequest, CreditLimitResponse, LastPaymentResponse, PendingTransactionsWSResponse);
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("1b838a2f-b0ea-469d-bda5-e7bfdb5ad245")]
                            endTime = System.DateTime.Now;
                            
                            timeTaken = endTime.Subtract(beginTime);
                            
                            Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestCompleteError(activityID, System.Convert.ToInt32(timeTaken.TotalMilliseconds), CustomerServiceResponse.ResponseStatus.Error.ErrorNumber, CustomerServiceResponse.ResponseStatus.Error.ErrorDescription, CustomerServiceResponse.ResponseStatus.Error.ErrorSource);
                        }
                        else 
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("a76878e1-8856-47a7-a191-4fc82bd51560")]
                            construct CustomerServiceResponse
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("2dd1f67c-a7ba-4671-bbf3-719a5833e5ae")]
                                transform (CustomerServiceResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.Aggregate_To_CustomerServiceResponse (CustomerServiceRequest, CreditLimitResponse, LastPaymentResponse, PendingTransactionsWSResponse);
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("2b60c131-8c2c-4151-97fc-fedb5992423a")]
                            endTime = System.DateTime.Now;
                            
                            timeTaken = endTime.Subtract(beginTime);
                            
                            Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestCompleteSuccess(activityID, System.Convert.ToInt32(timeTaken.TotalMilliseconds));
                        }
                    }
                    else 
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("08f742ea-f0e0-4d8b-896b-684731d7bc43")]
                        construct CustomerServiceResponse
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("490182b9-8bd4-4068-8252-cfe99b3af189")]
                            transform (CustomerServiceResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CustomerServiceResponseDenied (CustomerServiceRequest);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("a35ceca6-1e88-49d6-b08c-c376f576aa45")]
                            CustomerServiceResponse.ResponseStatus.Error.ErrorNumber = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceInvalidRequest;
                            CustomerServiceResponse.ResponseStatus.Error.ErrorDescription = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorDescription(Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceInvalidRequest);
                            CustomerServiceResponse.ResponseStatus.Error.ErrorSource = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorSource(Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceInvalidRequest);
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("eaeb8ca5-7eb3-4186-b697-f817f7ab9786")]
                        endTime = System.DateTime.Now;
                        
                        timeTaken = endTime.Subtract(beginTime);
                        
                        Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackInvalidRequest(activityID, System.Convert.ToInt32(timeTaken.TotalMilliseconds));
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("e30dba98-c39b-4a4d-b22d-8fadf7e0d5fa")]
                    // Complete the activity...
                    Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.EndRequest(activityID);
                }
                exceptions
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("14ddda60-0c5a-4b40-9e50-c78bac1f6898")]
                    catch (System.Exception ex)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("48e3617d-c802-4fe5-94c8-7543402aa0e8")]
                        if (activityID != null)
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("53f66f0e-d669-4ecd-aebd-a62d626e1a5d")]
                            
                            // An Exception is treated as an error from the BAM perspective...
                            
                            Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.TrackRequestCompleteError(
                                                        activityID, 
                                                        0, 
                                                        Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceExceptionError,
                                                        ex.Message, 
                                                        "Customer Service Orchestration"
                                    );
                            // Complete the activity...
                            Microsoft.Samples.BizTalk.WoodgroveBank.ServiceLevelTracking.ServiceLevelTracking.EndRequest(activityID);
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("c4a84fe9-48c4-42bd-bc59-398ed778c745")]
                        System.Diagnostics.Trace.Write("Exception in Orchestration: " + ex.ToString());
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("c5928f37-54e8-4c7e-8ed6-20dff27e150b")]
                        construct CustomerServiceResponse
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("59c3d483-4449-424a-b9eb-89ec28bc4b79")]
                            transform (CustomerServiceResponse) = Microsoft.Samples.BizTalk.WoodgroveBank.Maps.CustomerServiceRequest_To_CustomerServiceResponseDenied (CustomerServiceRequest);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("56014054-2e86-47ee-b5a5-c93cdcffd500")]
                            CustomerServiceResponse.ResponseStatus.Error.ErrorNumber = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceExceptionError;
                            CustomerServiceResponse.ResponseStatus.Error.ErrorDescription = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorDescription(ex);
                            CustomerServiceResponse.ResponseStatus.Error.ErrorSource = Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.GetCustomerServiceErrorSource(Microsoft.Samples.BizTalk.WoodgroveBank.ErrorHelper.CustomerServiceErrors.CustomerServiceExceptionError);
                        }
                    }
                }
            }
        }
    }
}

