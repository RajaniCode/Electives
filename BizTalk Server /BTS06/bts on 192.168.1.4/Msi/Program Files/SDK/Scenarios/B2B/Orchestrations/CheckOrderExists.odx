#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="e25af5e0-603e-4c76-9dfa-eca5563f59dc" LowerBound="1.1" HigherBound="87.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="PortType" OID="0c6f0705-da71-41c5-b36e-9176a90c8a70" ParentLink="Module_PortType" LowerBound="4.1" HigherBound="11.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="OrderInquiryPortType" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="OperationDeclaration" OID="58df1318-7996-4b98-85d0-8467e48147d2" ParentLink="PortType_OperationDeclaration" LowerBound="6.1" HigherBound="10.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="OrderInquiryOp" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="dc3e0c7f-a478-4c19-9c8a-5405c814a911" ParentLink="OperationDeclaration_FaultMessageRef" LowerBound="8.151" HigherBound="8.238">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.SystemFaultMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="SystemFault" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="0af965e7-c658-470a-b4e7-273522722577" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="8.82" HigherBound="8.149">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="MessageRef" OID="2d6c31b3-15e0-4dce-9798-93165eaa90ee" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="8.13" HigherBound="8.80">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="ServiceDeclaration" OID="60419123-dc2a-4bb7-abb2-c8dde98dec86" ParentLink="Module_ServiceDeclaration" LowerBound="11.1" HigherBound="86.1">
            <om:Property Name="InitializedTransactionType" Value="False" />
            <om:Property Name="IsInvokable" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="CheckOrderExists" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="VariableDeclaration" OID="31d2435e-6e5d-4e1e-a823-fbef261be926" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="17.1" HigherBound="18.1">
                <om:Property Name="InitialValue" Value="0" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="retryCount" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="a13b6ef6-1d3e-465b-9ecd-862a1c1a0c20" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="16.1" HigherBound="17.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="InquiryResponseMsg" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="aa52fd38-0ac8-4100-93af-6870513bbf77" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageDeclaration" OID="a04f84d3-6642-4835-a603-e166403a4e63" ParentLink="ServiceBody_Declaration" LowerBound="18.15" HigherBound="18.101">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="InquiryMsg" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="VariableDeclaration" OID="d7e87586-9362-4032-9af4-819753eab085" ParentLink="ServiceBody_Declaration" LowerBound="18.103" HigherBound="18.136">
                    <om:Property Name="InitialValue" Value="true" />
                    <om:Property Name="UseDefaultConstructor" Value="False" />
                    <om:Property Name="Type" Value="System.Boolean" />
                    <om:Property Name="ParamDirection" Value="Ref" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="bInquiryStatus" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="While" OID="2d5ccfbd-97c9-468c-b104-dcd802830588" ParentLink="ServiceBody_Statement" LowerBound="21.1" HigherBound="84.1">
                    <om:Property Name="Expression" Value="retryCount &lt; 3" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Retry Loop" />
                    <om:Property Name="Signal" Value="False" />
                    <om:Element Type="Scope" OID="84039d21-6309-463e-87b0-ed322dac617b" ParentLink="ComplexStatement_Statement" LowerBound="24.1" HigherBound="83.1">
                        <om:Property Name="InitializedTransactionType" Value="True" />
                        <om:Property Name="IsSynchronized" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="InquiryScope" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Task" OID="3074904a-af39-4d68-a2d7-24db4102a5ee" ParentLink="ComplexStatement_Statement" LowerBound="29.1" HigherBound="33.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Check PO Existence" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Send" OID="f4baf0f8-f36c-4440-9e65-ab793cbe79ad" ParentLink="ComplexStatement_Statement" LowerBound="29.1" HigherBound="31.1">
                                <om:Property Name="PortName" Value="OrderInquiryPort" />
                                <om:Property Name="MessageName" Value="InquiryMsg" />
                                <om:Property Name="OperationName" Value="OrderInquiryOp" />
                                <om:Property Name="OperationMessageName" Value="Request" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Send Inquiry" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                            <om:Element Type="Receive" OID="15c37605-efd0-421a-b527-12c9f912665c" ParentLink="ComplexStatement_Statement" LowerBound="31.1" HigherBound="33.1">
                                <om:Property Name="Activate" Value="False" />
                                <om:Property Name="PortName" Value="OrderInquiryPort" />
                                <om:Property Name="MessageName" Value="InquiryResponseMsg" />
                                <om:Property Name="OperationName" Value="OrderInquiryOp" />
                                <om:Property Name="OperationMessageName" Value="Response" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Recv Response" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="VariableAssignment" OID="0a432cd5-5508-4adf-aa4d-289da2095f97" ParentLink="ComplexStatement_Statement" LowerBound="33.1" HigherBound="36.1">
                            <om:Property Name="Expression" Value="bInquiryStatus = InquiryResponseMsg.Response.OrderExist;&#xD;&#xA;retryCount = 3;" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Breakloop" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Catch" OID="48a37068-a46c-4d78-bb00-d97cd7cfd5c4" ParentLink="Scope_Catch" LowerBound="39.1" HigherBound="60.1">
                            <om:Property Name="ExceptionName" Value="OrderSystemSystemFault" />
                            <om:Property Name="ExceptionType" Value="OrderInquiryPort.OrderInquiryOp.SystemFault" />
                            <om:Property Name="IsFaultMessage" Value="False" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="CatchSystemException" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="VariableAssignment" OID="dc511e40-73a5-49ad-8228-0009b859518f" ParentLink="Catch_Statement" LowerBound="42.1" HigherBound="44.1">
                                <om:Property Name="Expression" Value="retryCount = retryCount + 1;" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Count" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                            <om:Element Type="Decision" OID="87ce685d-5399-44b2-8f20-2ca3da68a489" ParentLink="Catch_Statement" LowerBound="44.1" HigherBound="59.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Terminate" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="0b8db181-27eb-4c28-9336-599aa2b93b66" ParentLink="ReallyComplexStatement_Branch" LowerBound="45.29" HigherBound="52.1">
                                    <om:Property Name="Expression" Value="retryCount &lt; 3" />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="RetryOver" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="2d8eb837-6c8a-4008-8d08-2b85da3b1a02" ParentLink="ComplexStatement_Statement" LowerBound="47.1" HigherBound="49.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;Litware Scenario&quot;, &quot;Failed to get exsistance of order &quot;+ InquiryMsg.Request.OrderGroupId +&quot; from order system. Orchestration suspended due to error &quot; + OrderSystemSystemFault.Message, System.Diagnostics.EventLogEntryType.Warning);" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Log Susp Error" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="Suspend" OID="b8087be8-9e8d-4e00-941b-121479039a59" ParentLink="ComplexStatement_Statement" LowerBound="49.1" HigherBound="51.1">
                                        <om:Property Name="ErrorMessage" Value="OrderSystemSystemFault.Message;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Suspend" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="f6931d48-a1be-4811-8411-2ca5e240b570" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="0434b49f-8572-4012-a1ee-74fcd6dcfc00" ParentLink="ComplexStatement_Statement" LowerBound="54.1" HigherBound="56.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;Litware Scenario&quot;, &quot;Failed to get order &quot;+ InquiryMsg.Request.OrderGroupId +&quot; from order system. Returing failure due to &quot; + OrderSystemSystemFault.Message, System.Diagnostics.EventLogEntryType.Error);&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Log Failure Error" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="732bec69-aa27-4185-a91a-1e43a92c6ab5" ParentLink="ComplexStatement_Statement" LowerBound="56.1" HigherBound="58.1">
                                        <om:Property Name="Expression" Value="bInquiryStatus = false;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Failure Inquiry" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Catch" OID="c6f3b743-8e22-4f5f-9ecf-e19759c795e7" ParentLink="Scope_Catch" LowerBound="60.1" HigherBound="81.1">
                            <om:Property Name="ExceptionName" Value="exp" />
                            <om:Property Name="ExceptionType" Value="System.Exception" />
                            <om:Property Name="IsFaultMessage" Value="False" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="CatchException" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="VariableAssignment" OID="5d459ab5-14f4-465c-b9e8-e8e91fdb30a4" ParentLink="Catch_Statement" LowerBound="63.1" HigherBound="65.1">
                                <om:Property Name="Expression" Value="retryCount = retryCount + 1;" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Count" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                            <om:Element Type="Decision" OID="e9e665ca-f6d7-4126-9dda-6538ed18b944" ParentLink="Catch_Statement" LowerBound="65.1" HigherBound="80.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Terminate" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="0c42f44b-a70e-4687-826c-536df3561e8a" ParentLink="ReallyComplexStatement_Branch" LowerBound="66.29" HigherBound="73.1">
                                    <om:Property Name="Expression" Value="retryCount &lt; 3" />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="RetryOver" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="ebb350c2-5ced-469f-9392-e6d79a11670b" ParentLink="ComplexStatement_Statement" LowerBound="68.1" HigherBound="70.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;Litware Scenario&quot;, &quot;Failed to get exsistance of order &quot;+ InquiryMsg.Request.OrderGroupId +&quot; from order system. Orchestration suspended due to error &quot; + exp.Message, System.Diagnostics.EventLogEntryType.Warning);" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Log Susp Error" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="Suspend" OID="a6f98024-32ef-40f7-8259-97fa2b754150" ParentLink="ComplexStatement_Statement" LowerBound="70.1" HigherBound="72.1">
                                        <om:Property Name="ErrorMessage" Value="exp.Message;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Suspend" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="13b23544-8e27-462f-a8dc-1158ac193b13" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="4fe7fc5a-02de-4be4-958e-7657a58bd059" ParentLink="ComplexStatement_Statement" LowerBound="75.1" HigherBound="77.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;Litware Scenario&quot;, &quot;Failed to get order &quot;+ InquiryMsg.Request.OrderGroupId +&quot; from order system. Returing failure due to &quot; + exp.Message, System.Diagnostics.EventLogEntryType.Error);&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Log Failure Error" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="702e02bc-b0a5-4edf-bea9-de5cc3164c26" ParentLink="ComplexStatement_Statement" LowerBound="77.1" HigherBound="79.1">
                                        <om:Property Name="Expression" Value="bInquiryStatus = false;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Failure Inquiry" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="e9597cf9-b26e-41c8-b812-c441501bf280" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="14.1" HigherBound="16.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="15" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations.OrderInquiryPortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="OrderInquiryPort" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="LogicalBindingAttribute" OID="7300c776-45c0-4c85-b314-9503308b83c6" ParentLink="PortDeclaration_CLRAttribute" LowerBound="14.1" HigherBound="15.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module Microsoft.Samples.BizTalk.Litware.Orchestrations
{
    internal porttype OrderInquiryPortType
    {
        requestresponse OrderInquiryOp
        {
            Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry, Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry, SystemFault = Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.SystemFaultMessage
        };
    };
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    internal service CheckOrderExists
    {
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses OrderInquiryPortType OrderInquiryPort;
        message Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry InquiryResponseMsg;
        System.Int32 retryCount;
        body (message Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry InquiryMsg, ref System.Boolean bInquiryStatus)
        {
            retryCount = 0;
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("2d5ccfbd-97c9-468c-b104-dcd802830588")]
            while (retryCount < 3)
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("84039d21-6309-463e-87b0-ed322dac617b")]
                scope
                {
                    body
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("f4baf0f8-f36c-4440-9e65-ab793cbe79ad")]
                        send (OrderInquiryPort.OrderInquiryOp, InquiryMsg);
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("15c37605-efd0-421a-b527-12c9f912665c")]
                        receive (OrderInquiryPort.OrderInquiryOp, InquiryResponseMsg);
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("0a432cd5-5508-4adf-aa4d-289da2095f97")]
                        bInquiryStatus = InquiryResponseMsg.Response.OrderExist;
                        retryCount = 3;
                    }
                    exceptions
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("48a37068-a46c-4d78-bb00-d97cd7cfd5c4")]
                        catch (OrderInquiryPort.OrderInquiryOp.SystemFault OrderSystemSystemFault)
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("dc511e40-73a5-49ad-8228-0009b859518f")]
                            retryCount = retryCount + 1;
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("87ce685d-5399-44b2-8f20-2ca3da68a489")]
                            if (retryCount < 3)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("2d8eb837-6c8a-4008-8d08-2b85da3b1a02")]
                                System.Diagnostics.EventLog.WriteEntry("Litware Scenario", "Failed to get exsistance of order "+ InquiryMsg.Request.OrderGroupId +" from order system. Orchestration suspended due to error " + OrderSystemSystemFault.Message, System.Diagnostics.EventLogEntryType.Warning);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("b8087be8-9e8d-4e00-941b-121479039a59")]
                                suspend OrderSystemSystemFault.Message;
                            }
                            else 
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("0434b49f-8572-4012-a1ee-74fcd6dcfc00")]
                                System.Diagnostics.EventLog.WriteEntry("Litware Scenario", "Failed to get order "+ InquiryMsg.Request.OrderGroupId +" from order system. Returing failure due to " + OrderSystemSystemFault.Message, System.Diagnostics.EventLogEntryType.Error);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("732bec69-aa27-4185-a91a-1e43a92c6ab5")]
                                bInquiryStatus = false;
                            }
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("c6f3b743-8e22-4f5f-9ecf-e19759c795e7")]
                        catch (System.Exception exp)
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("5d459ab5-14f4-465c-b9e8-e8e91fdb30a4")]
                            retryCount = retryCount + 1;
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("e9e665ca-f6d7-4126-9dda-6538ed18b944")]
                            if (retryCount < 3)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("ebb350c2-5ced-469f-9392-e6d79a11670b")]
                                System.Diagnostics.EventLog.WriteEntry("Litware Scenario", "Failed to get exsistance of order "+ InquiryMsg.Request.OrderGroupId +" from order system. Orchestration suspended due to error " + exp.Message, System.Diagnostics.EventLogEntryType.Warning);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("a6f98024-32ef-40f7-8259-97fa2b754150")]
                                suspend exp.Message;
                            }
                            else 
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("4fe7fc5a-02de-4be4-958e-7657a58bd059")]
                                System.Diagnostics.EventLog.WriteEntry("Litware Scenario", "Failed to get order "+ InquiryMsg.Request.OrderGroupId +" from order system. Returing failure due to " + exp.Message, System.Diagnostics.EventLogEntryType.Error);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("702e02bc-b0a5-4edf-bea9-de5cc3164c26")]
                                bInquiryStatus = false;
                            }
                        }
                    }
                }
            }
        }
    }
}

