#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="504e34a6-ea78-466e-b2e9-a6fe77b773ff" LowerBound="1.1" HigherBound="85.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="PortType" OID="88ebd920-987e-4037-abd9-81fadd291bcc" ParentLink="Module_PortType" LowerBound="4.1" HigherBound="11.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Public" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="UserPortType" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="OperationDeclaration" OID="00845884-81e4-4ab7-a018-bb4c764ea4fe" ParentLink="PortType_OperationDeclaration" LowerBound="6.1" HigherBound="10.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_User" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="5448d4fa-41b8-44ee-8487-792c9e7d1251" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="8.54" HigherBound="8.94">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations.TPMAccess.TPMAccess_.GetPartner_response" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="c9720e62-410d-4f85-8999-764b8251377e" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="8.13" HigherBound="8.52">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations.TPMAccess.TPMAccess_.GetPartner_request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="ServiceDeclaration" OID="fd8eb9d4-f8b9-49f3-9881-969a9ef8a162" ParentLink="Module_ServiceDeclaration" LowerBound="11.1" HigherBound="84.1">
            <om:Property Name="InitializedTransactionType" Value="False" />
            <om:Property Name="IsInvokable" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="GetUserProfile" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="VariableDeclaration" OID="d48c7e95-b7db-41de-94b7-15bd98cbeb8d" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="18.1" HigherBound="19.1">
                <om:Property Name="InitialValue" Value="0" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="retryCount" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="da9cf466-d110-4855-a0a4-19b59c90e9c9" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="16.1" HigherBound="17.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations.TPMAccess.TPMAccess_.GetPartner_request" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="QueryMessage" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="25101e11-bc77-416d-99eb-beeef5b1fd1b" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="17.1" HigherBound="18.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations.TPMAccess.TPMAccess_.GetPartner_response" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Profile" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="a0398a76-d6e6-4354-a35a-7b7ff361742b" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="VariableDeclaration" OID="e2b179c9-b50e-4128-8661-a09570514cf9" ParentLink="ServiceBody_Declaration" LowerBound="19.15" HigherBound="19.35">
                    <om:Property Name="UseDefaultConstructor" Value="False" />
                    <om:Property Name="Type" Value="System.String" />
                    <om:Property Name="ParamDirection" Value="In" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="userID" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageDeclaration" OID="fd0f5785-072d-41c1-81a8-a7894dfb7b96" ParentLink="ServiceBody_Declaration" LowerBound="19.37" HigherBound="19.130">
                    <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Schemas.TPM.Partner.PartnerObject" />
                    <om:Property Name="ParamDirection" Value="Out" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ReturnProfile" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="VariableDeclaration" OID="75c0378b-3095-441b-a681-76dfb42ed132" ParentLink="ServiceBody_Declaration" LowerBound="19.132" HigherBound="19.164">
                    <om:Property Name="InitialValue" Value="true" />
                    <om:Property Name="UseDefaultConstructor" Value="False" />
                    <om:Property Name="Type" Value="System.Boolean" />
                    <om:Property Name="ParamDirection" Value="Ref" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="bIntervention" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Construct" OID="a76a0977-e7e6-4c6e-9dc9-f92f4b00b81b" ParentLink="ServiceBody_Statement" LowerBound="22.1" HigherBound="28.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ConstructQueryMessage" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="MessageRef" OID="eef9eebd-d4ce-4746-a4e5-dbc99c85e3f3" ParentLink="Construct_MessageRef" LowerBound="23.23" HigherBound="23.35">
                        <om:Property Name="Ref" Value="QueryMessage" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="MessageAssignment" OID="8cf3d881-d00b-4c6b-8fb3-e0a34a35a7db" ParentLink="ComplexStatement_Statement" LowerBound="25.1" HigherBound="27.1">
                        <om:Property Name="Expression" Value="QueryMessage.partnerID = userID;" />
                        <om:Property Name="ReportToAnalyst" Value="False" />
                        <om:Property Name="Name" Value="SetID" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                </om:Element>
                <om:Element Type="Construct" OID="3579b1c8-b4aa-4eeb-91f4-0bc1a95b3cbb" ParentLink="ServiceBody_Statement" LowerBound="28.1" HigherBound="34.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="IntializeOutMessage" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="MessageRef" OID="a99b6067-f725-4a84-93a5-1ecfd9ae0162" ParentLink="Construct_MessageRef" LowerBound="29.23" HigherBound="29.36">
                        <om:Property Name="Ref" Value="ReturnProfile" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="MessageAssignment" OID="c84062c6-87fb-4d29-a809-8bde912b0a81" ParentLink="ComplexStatement_Statement" LowerBound="31.1" HigherBound="33.1">
                        <om:Property Name="Expression" Value="ReturnProfile = Microsoft.Samples.BizTalk.Litware.Utilities.ResourceHelper.GetEmptyUserMessage();" />
                        <om:Property Name="ReportToAnalyst" Value="False" />
                        <om:Property Name="Name" Value="Empty" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                </om:Element>
                <om:Element Type="While" OID="db929739-bfcf-4418-b014-53e608949215" ParentLink="ServiceBody_Statement" LowerBound="34.1" HigherBound="82.1">
                    <om:Property Name="Expression" Value="retryCount &lt; 3" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="RetryLoop" />
                    <om:Property Name="Signal" Value="False" />
                    <om:Element Type="Scope" OID="06de8302-a58e-4c4d-b192-fb88a2b33df5" ParentLink="ComplexStatement_Statement" LowerBound="37.1" HigherBound="81.1">
                        <om:Property Name="InitializedTransactionType" Value="True" />
                        <om:Property Name="IsSynchronized" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="GetProfileForEmailNotificationScope" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Send" OID="9a2e2f76-fff2-4c77-b846-ef209ba91f37" ParentLink="ComplexStatement_Statement" LowerBound="42.1" HigherBound="44.1">
                            <om:Property Name="PortName" Value="GetProfilePort" />
                            <om:Property Name="MessageName" Value="QueryMessage" />
                            <om:Property Name="OperationName" Value="GetPartner" />
                            <om:Property Name="OperationMessageName" Value="Request" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="SendUserInfoRequest" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Receive" OID="71134827-7b7f-4ba3-b466-b2614e92a1dc" ParentLink="ComplexStatement_Statement" LowerBound="44.1" HigherBound="46.1">
                            <om:Property Name="Activate" Value="False" />
                            <om:Property Name="PortName" Value="GetProfilePort" />
                            <om:Property Name="MessageName" Value="Profile" />
                            <om:Property Name="OperationName" Value="GetPartner" />
                            <om:Property Name="OperationMessageName" Value="Response" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ReceiveUserInfo" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Construct" OID="eae858bd-5eb8-4d86-bc0f-d6f7c5b3c662" ParentLink="ComplexStatement_Statement" LowerBound="46.1" HigherBound="52.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ConstructReturnMessage" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="MessageRef" OID="4e256425-03b4-44ff-a981-c0d41ce9d3be" ParentLink="Construct_MessageRef" LowerBound="47.35" HigherBound="47.48">
                                <om:Property Name="Ref" Value="ReturnProfile" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="MessageAssignment" OID="6d4e9d00-543b-41db-963b-0b897f0010ca" ParentLink="ComplexStatement_Statement" LowerBound="49.1" HigherBound="51.1">
                                <om:Property Name="Expression" Value="ReturnProfile = Microsoft.Samples.BizTalk.Litware.Utilities.XmlHelper.ConvertStringToXml(Profile.GetPartnerResult);" />
                                <om:Property Name="ReportToAnalyst" Value="False" />
                                <om:Property Name="Name" Value="MessageAssignment_1" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="VariableAssignment" OID="e2029de2-73a9-414d-bae5-ab344f6106a9" ParentLink="ComplexStatement_Statement" LowerBound="52.1" HigherBound="55.1">
                            <om:Property Name="Expression" Value="bIntervention = false;&#xD;&#xA;retryCount = 3;" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Breakloop" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Catch" OID="d97fd62c-13b8-42ca-a142-eade261f2edd" ParentLink="Scope_Catch" LowerBound="58.1" HigherBound="79.1">
                            <om:Property Name="ExceptionName" Value="exp" />
                            <om:Property Name="ExceptionType" Value="System.Exception" />
                            <om:Property Name="IsFaultMessage" Value="False" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="CatchGetProfileException" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="VariableAssignment" OID="3e3fc704-a643-416f-818f-722a4a3b0f40" ParentLink="Catch_Statement" LowerBound="61.1" HigherBound="63.1">
                                <om:Property Name="Expression" Value="retryCount = retryCount + 1;" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Count" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                            <om:Element Type="Decision" OID="4d51da26-bdca-423c-bcb2-598ce663bf45" ParentLink="Catch_Statement" LowerBound="63.1" HigherBound="78.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Terminate" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="94cd7d3e-e6d3-4d54-b1a3-a3d70a5da373" ParentLink="ReallyComplexStatement_Branch" LowerBound="64.29" HigherBound="71.1">
                                    <om:Property Name="Expression" Value="retryCount &lt; 3" />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="RetryOver" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="9379a91b-0c26-4302-9fea-5cd1f4974cd2" ParentLink="ComplexStatement_Statement" LowerBound="66.1" HigherBound="68.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;Litware Scenario&quot;, &quot;Failed to get profile of partner &quot; + userID +&quot; from TPM system. Orchestration suspended due to error &quot; + exp.Message, System.Diagnostics.EventLogEntryType.Warning);&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Log Susp Error" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="Suspend" OID="3d69e19a-08dc-4904-86ef-7db5e169d41a" ParentLink="ComplexStatement_Statement" LowerBound="68.1" HigherBound="70.1">
                                        <om:Property Name="ErrorMessage" Value="exp.Message;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Suspend" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="8a32907e-5641-44b7-997b-6d991ffc94d6" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="ca485763-9bde-4c3f-b783-ad62d8501cc9" ParentLink="ComplexStatement_Statement" LowerBound="73.1" HigherBound="75.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;Litware Scenario&quot;, &quot;Failed to get profile of partner &quot; + userID +&quot; from TPM system. Returing failure due to &quot; + exp.Message, System.Diagnostics.EventLogEntryType.Error);&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Log Term Error" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="VariableAssignment" OID="56b791e9-c13e-42ea-b0ff-810bda946291" ParentLink="ComplexStatement_Statement" LowerBound="75.1" HigherBound="77.1">
                                        <om:Property Name="Expression" Value="bIntervention = true;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Intervention" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="a566a598-8e77-4d87-a703-4ba77b65076e" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="14.1" HigherBound="16.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="29" />
                <om:Property Name="IsWebPort" Value="True" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Orchestrations.TPMAccess.TPMAccess_.TPMAccess" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="GetProfilePort" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="3d40153a-19c2-4e4a-b862-bde057933406" ParentLink="PortDeclaration_CLRAttribute" LowerBound="14.1" HigherBound="15.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module Microsoft.Samples.BizTalk.Litware.Orchestrations
{
    public porttype UserPortType
    {
        requestresponse Operation_User
        {
            TPMAccess.TPMAccess_.GetPartner_request, TPMAccess.TPMAccess_.GetPartner_response
        };
    };
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    internal service GetUserProfile
    {
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses TPMAccess.TPMAccess_.TPMAccess GetProfilePort;
        message TPMAccess.TPMAccess_.GetPartner_request QueryMessage;
        message TPMAccess.TPMAccess_.GetPartner_response Profile;
        System.Int32 retryCount;
        body (System.String userID, out message Microsoft.Samples.BizTalk.Litware.Schemas.TPM.Partner.PartnerObject ReturnProfile, ref System.Boolean bIntervention)
        {
            retryCount = 0;
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("a76a0977-e7e6-4c6e-9dc9-f92f4b00b81b")]
            construct QueryMessage
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("8cf3d881-d00b-4c6b-8fb3-e0a34a35a7db")]
                QueryMessage.partnerID = userID;
            }
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("3579b1c8-b4aa-4eeb-91f4-0bc1a95b3cbb")]
            construct ReturnProfile
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("c84062c6-87fb-4d29-a809-8bde912b0a81")]
                ReturnProfile = Microsoft.Samples.BizTalk.Litware.Utilities.ResourceHelper.GetEmptyUserMessage();
            }
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("db929739-bfcf-4418-b014-53e608949215")]
            while (retryCount < 3)
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("06de8302-a58e-4c4d-b192-fb88a2b33df5")]
                scope
                {
                    body
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("9a2e2f76-fff2-4c77-b846-ef209ba91f37")]
                        send (GetProfilePort.GetPartner, QueryMessage);
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("71134827-7b7f-4ba3-b466-b2614e92a1dc")]
                        receive (GetProfilePort.GetPartner, Profile);
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("eae858bd-5eb8-4d86-bc0f-d6f7c5b3c662")]
                        construct ReturnProfile
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("6d4e9d00-543b-41db-963b-0b897f0010ca")]
                            ReturnProfile = Microsoft.Samples.BizTalk.Litware.Utilities.XmlHelper.ConvertStringToXml(Profile.GetPartnerResult);
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("e2029de2-73a9-414d-bae5-ab344f6106a9")]
                        bIntervention = false;
                        retryCount = 3;
                    }
                    exceptions
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("d97fd62c-13b8-42ca-a142-eade261f2edd")]
                        catch (System.Exception exp)
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("3e3fc704-a643-416f-818f-722a4a3b0f40")]
                            retryCount = retryCount + 1;
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("4d51da26-bdca-423c-bcb2-598ce663bf45")]
                            if (retryCount < 3)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("9379a91b-0c26-4302-9fea-5cd1f4974cd2")]
                                System.Diagnostics.EventLog.WriteEntry("Litware Scenario", "Failed to get profile of partner " + userID +" from TPM system. Orchestration suspended due to error " + exp.Message, System.Diagnostics.EventLogEntryType.Warning);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("3d69e19a-08dc-4904-86ef-7db5e169d41a")]
                                suspend exp.Message;
                            }
                            else 
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("ca485763-9bde-4c3f-b783-ad62d8501cc9")]
                                System.Diagnostics.EventLog.WriteEntry("Litware Scenario", "Failed to get profile of partner " + userID +" from TPM system. Returing failure due to " + exp.Message, System.Diagnostics.EventLogEntryType.Error);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("56b791e9-c13e-42ea-b0ff-810bda946291")]
                                bIntervention = true;
                            }
                        }
                    }
                }
            }
        }
    }
}

