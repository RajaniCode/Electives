#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="ed0366e8-4ecb-4387-9cfd-f190cefb3cf9" LowerBound="1.1" HigherBound="72.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="Microsoft.Samples.BizTalk.Litware.OrderSystem" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="PortType" OID="b0b13ff1-67b4-4a12-b890-042778c55923" ParentLink="Module_PortType" LowerBound="4.1" HigherBound="11.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="RecvInquiryType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="67565df2-12cd-4760-889b-59bac485cf16" ParentLink="PortType_OperationDeclaration" LowerBound="6.1" HigherBound="10.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="RecvInquiryOp" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="424e0730-beab-4302-bfdc-c121ac917d33" ParentLink="OperationDeclaration_FaultMessageRef" LowerBound="8.151" HigherBound="8.238">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.SystemFaultMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="SystemFault" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="7cbbd044-1287-489e-961e-05eb9ed6258d" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="8.82" HigherBound="8.149">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="225b6695-a9dc-4c6f-9c9a-7a88e8e1ec0e" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="8.13" HigherBound="8.80">
                    <om:Property Name="Ref" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="ServiceDeclaration" OID="9268f3f1-ae3c-49d4-8b9e-b822cb3ca9c0" ParentLink="Module_ServiceDeclaration" LowerBound="11.1" HigherBound="71.1">
            <om:Property Name="InitializedTransactionType" Value="False" />
            <om:Property Name="IsInvokable" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="IsOrderExist" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="VariableDeclaration" OID="a99d5d0c-3d7b-414e-abb9-355ebfb5e5f6" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="19.1" HigherBound="20.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="orderID" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="d98eede6-3436-4b61-8c8e-40c2436adfe3" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="20.1" HigherBound="21.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="partnerID" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="138b2144-8051-4d15-8351-eea50b9f0955" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="21.1" HigherBound="22.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="result" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="03b72cc3-e75a-42af-8cdd-80c11572d727" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="16.1" HigherBound="17.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="InquiryMsg" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="39b07dbc-1c70-41f8-87a9-4691d4313adc" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="17.1" HigherBound="18.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ResponseMsg" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="801782e9-d8b2-4cea-815c-ebc93164e7a7" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="18.1" HigherBound="19.1">
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.SystemFaultMessage" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="SystemFaultMessage" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="36aa0238-946b-4ff3-b5f8-53dfe0deab0d" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="Receive" OID="3dd8cc3e-330d-43a0-9c73-dd4f8c4af820" ParentLink="ServiceBody_Statement" LowerBound="24.1" HigherBound="29.1">
                    <om:Property Name="Activate" Value="True" />
                    <om:Property Name="PortName" Value="RecvInquiry" />
                    <om:Property Name="MessageName" Value="InquiryMsg" />
                    <om:Property Name="OperationName" Value="RecvInquiryOp" />
                    <om:Property Name="OperationMessageName" Value="Request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Recv Inquiry" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="DNFPredicate" OID="03b18745-745b-403d-a0ec-6e96137ba0fe" ParentLink="Receive_DNFPredicate">
                        <om:Property Name="LHS" Value="Microsoft.Samples.BizTalk.Litware.Schemas.ReturnPOXML" />
                        <om:Property Name="RHS" Value="false" />
                        <om:Property Name="Grouping" Value="AND" />
                        <om:Property Name="Operator" Value="Equals" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                </om:Element>
                <om:Element Type="VariableAssignment" OID="5cf65268-c2b9-41db-90cc-14859e1a12b6" ParentLink="ServiceBody_Statement" LowerBound="29.1" HigherBound="32.1">
                    <om:Property Name="Expression" Value="orderID = InquiryMsg.Request.OrderGroupId;&#xD;&#xA;partnerID = InquiryMsg.Request.SoldToName;" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Get Params" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="Scope" OID="8f4342f4-0489-48dc-bbb3-814330fce763" ParentLink="ServiceBody_Statement" LowerBound="32.1" HigherBound="60.1">
                    <om:Property Name="InitializedTransactionType" Value="True" />
                    <om:Property Name="IsSynchronized" Value="False" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="CheckExsitScope" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="VariableAssignment" OID="6b85f173-c41d-4e8a-b910-c38c821e021e" ParentLink="ComplexStatement_Statement" LowerBound="37.1" HigherBound="39.1">
                        <om:Property Name="Expression" Value="result = Microsoft.Samples.BizTalk.Litware.Utilities.DBHelper.IsOrderExist(partnerID, orderID);" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Check Existance" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                    <om:Element Type="Catch" OID="6ce34cef-0fbd-47a3-9918-c27865b8d23d" ParentLink="Scope_Catch" LowerBound="42.1" HigherBound="58.1">
                        <om:Property Name="ExceptionName" Value="e" />
                        <om:Property Name="ExceptionType" Value="System.Exception" />
                        <om:Property Name="IsFaultMessage" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="CatchAllException" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Construct" OID="abae8112-bb6c-480e-be2a-ea9216c45125" ParentLink="Catch_Statement" LowerBound="45.1" HigherBound="53.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="SystemFaultMessage" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="MessageRef" OID="7324b443-a948-42b6-bd1a-2ed489210ba8" ParentLink="Construct_MessageRef" LowerBound="46.35" HigherBound="46.53">
                                <om:Property Name="Ref" Value="SystemFaultMessage" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="MessageAssignment" OID="84ceb54d-58f9-4e71-ac8b-39b7aef693e1" ParentLink="ComplexStatement_Statement" LowerBound="48.1" HigherBound="52.1">
                                <om:Property Name="Expression" Value="SystemFaultMessage = Microsoft.Samples.BizTalk.Litware.Utilities.ResourceHelper.GetEmptySystemFault();&#xD;&#xA;SystemFaultMessage.Message = e.Message;&#xD;&#xA;SystemFaultMessage.Trace = e.StackTrace;" />
                                <om:Property Name="ReportToAnalyst" Value="False" />
                                <om:Property Name="Name" Value="CreateSystemFaultMessage" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Send" OID="efd4aceb-835f-4c54-9bd7-90fbb681c0f9" ParentLink="Catch_Statement" LowerBound="53.1" HigherBound="55.1">
                            <om:Property Name="PortName" Value="RecvInquiry" />
                            <om:Property Name="MessageName" Value="SystemFaultMessage" />
                            <om:Property Name="OperationName" Value="RecvInquiryOp" />
                            <om:Property Name="OperationMessageName" Value="SystemFault" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Send System Fault" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Terminate" OID="6a8d7938-4705-413c-ba42-c6de95cb8f03" ParentLink="Catch_Statement" LowerBound="55.1" HigherBound="57.1">
                            <om:Property Name="ErrorMessage" Value="e.Message;" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="End Orch" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                </om:Element>
                <om:Element Type="Construct" OID="19a53819-bf5c-42ab-8641-469d58376870" ParentLink="ServiceBody_Statement" LowerBound="60.1" HigherBound="67.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Construct Result" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="MessageAssignment" OID="a7ab3b58-d089-41fa-9c24-a51b27213dc2" ParentLink="ComplexStatement_Statement" LowerBound="63.1" HigherBound="66.1">
                        <om:Property Name="Expression" Value="ResponseMsg = InquiryMsg;&#xD;&#xA;ResponseMsg.Response.OrderExist = result;&#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="False" />
                        <om:Property Name="Name" Value="Set Result" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                    <om:Element Type="MessageRef" OID="e66f0ac0-5ffb-4730-a1f8-80a1fcd2b189" ParentLink="Construct_MessageRef" LowerBound="61.23" HigherBound="61.34">
                        <om:Property Name="Ref" Value="ResponseMsg" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                </om:Element>
                <om:Element Type="Send" OID="94d93d27-f937-454f-95c4-4df463b6be09" ParentLink="ServiceBody_Statement" LowerBound="67.1" HigherBound="69.1">
                    <om:Property Name="PortName" Value="RecvInquiry" />
                    <om:Property Name="MessageName" Value="ResponseMsg" />
                    <om:Property Name="OperationName" Value="RecvInquiryOp" />
                    <om:Property Name="OperationMessageName" Value="Response" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Send Result" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="45a321e9-a814-458e-b026-57c0d5072da2" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="14.1" HigherBound="16.1">
                <om:Property Name="PortModifier" Value="Implements" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="Microsoft.Samples.BizTalk.Litware.OrderSystem.RecvInquiryType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="RecvInquiry" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="LogicalBindingAttribute" OID="00bb6d08-a78d-4e58-9746-9aa93c22cbf1" ParentLink="PortDeclaration_CLRAttribute" LowerBound="14.1" HigherBound="15.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module Microsoft.Samples.BizTalk.Litware.OrderSystem
{
    internal porttype RecvInquiryType
    {
        requestresponse RecvInquiryOp
        {
            Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry, Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry, SystemFault = Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.SystemFaultMessage
        };
    };
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    internal service IsOrderExist
    {
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port implements RecvInquiryType RecvInquiry;
        message Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry InquiryMsg;
        message Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.OrderInquiry ResponseMsg;
        message Microsoft.Samples.BizTalk.Litware.Schemas.OrderSystem.SystemFaultMessage SystemFaultMessage;
        System.String orderID;
        System.String partnerID;
        System.Boolean result;
        body ()
        {
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("3dd8cc3e-330d-43a0-9c73-dd4f8c4af820")]
            activate ((Microsoft.Samples.BizTalk.Litware.Schemas.ReturnPOXML == false))receive (RecvInquiry.RecvInquiryOp, InquiryMsg);
            orderID = "";
            partnerID = "";
            result = true;
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("5cf65268-c2b9-41db-90cc-14859e1a12b6")]
            orderID = InquiryMsg.Request.OrderGroupId;
            partnerID = InquiryMsg.Request.SoldToName;
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("8f4342f4-0489-48dc-bbb3-814330fce763")]
            scope
            {
                body
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("6b85f173-c41d-4e8a-b910-c38c821e021e")]
                    result = Microsoft.Samples.BizTalk.Litware.Utilities.DBHelper.IsOrderExist(partnerID, orderID);
                }
                exceptions
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("6ce34cef-0fbd-47a3-9918-c27865b8d23d")]
                    catch (System.Exception e)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("abae8112-bb6c-480e-be2a-ea9216c45125")]
                        construct SystemFaultMessage
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("84ceb54d-58f9-4e71-ac8b-39b7aef693e1")]
                            SystemFaultMessage = Microsoft.Samples.BizTalk.Litware.Utilities.ResourceHelper.GetEmptySystemFault();
                            SystemFaultMessage.Message = e.Message;
                            SystemFaultMessage.Trace = e.StackTrace;
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("efd4aceb-835f-4c54-9bd7-90fbb681c0f9")]
                        send (RecvInquiry.RecvInquiryOp.SystemFault, SystemFaultMessage);
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("6a8d7938-4705-413c-ba42-c6de95cb8f03")]
                        terminate e.Message;;
                    }
                }
            }
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("19a53819-bf5c-42ab-8641-469d58376870")]
            construct ResponseMsg
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("a7ab3b58-d089-41fa-9c24-a51b27213dc2")]
                ResponseMsg = InquiryMsg;
                ResponseMsg.Response.OrderExist = result;
            }
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("94d93d27-f937-454f-95c4-4df463b6be09")]
            send (RecvInquiry.RecvInquiryOp, ResponseMsg);
        }
    }
}

